{"ast":null,"code":"import { useDispatch } from 'react-redux';\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { setPageData, updatePageDada } from '../redux/page-data/actions';\nexport function usePageData(pageData) {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(setPageData({ ...pageData,\n      loaded: true\n    }));\n  }, [pageData, dispatch]);\n}\nexport function useFetchPageData(url) {\n  let initialState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  let callback = arguments.length > 2 ? arguments[2] : undefined;\n  const [data, setData] = useState(initialState);\n  const dispatch = useDispatch();\n\n  async function getData() {\n    const result = await axios.get(url);\n    return result.data;\n  }\n\n  useEffect(() => {\n    getData().then(data => {\n      if (callback) {\n        callback(data);\n      }\n\n      setTimeout(() => dispatch(updatePageDada({\n        fulFilled: true,\n        loaded: true\n      })), 300);\n      setData(data);\n    }).catch(console.error);\n  }, [url, dispatch]);\n  return [data, setData];\n}","map":{"version":3,"names":["useDispatch","useEffect","useState","axios","setPageData","updatePageDada","usePageData","pageData","dispatch","loaded","useFetchPageData","url","initialState","callback","data","setData","getData","result","get","then","setTimeout","fulFilled","catch","console","error"],"sources":["E:/Work/PFE/Project folder/DocHelp/src/hooks/usePage.tsx"],"sourcesContent":["import { useDispatch } from 'react-redux';\nimport { useEffect, useState } from 'react';\n\nimport axios from 'axios';\n\nimport { setPageData, updatePageDada } from '../redux/page-data/actions';\n\nimport { IPageData } from '../interfaces/page';\n\nexport function usePageData(pageData: IPageData) {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(setPageData({ ...pageData, loaded: true }));\n  }, [pageData, dispatch]);\n}\n\nexport function useFetchPageData<T>(\n  url: string,\n  initialState: T = null,\n  callback?: (T) => any\n): [T, (data: T) => void] {\n  const [data, setData] = useState<T>(initialState);\n  const dispatch = useDispatch();\n\n  async function getData() {\n    const result = await axios.get(url);\n    return result.data;\n  }\n\n  useEffect(() => {\n    getData()\n      .then((data) => {\n        if (callback) {\n          callback(data);\n        }\n\n        setTimeout(() => dispatch(updatePageDada({ fulFilled: true, loaded: true })), 300);\n\n        setData(data);\n      })\n      .catch(console.error);\n  }, [url, dispatch]);\n\n  return [data, setData];\n}\n"],"mappings":"AAAA,SAASA,WAAT,QAA4B,aAA5B;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,WAAT,EAAsBC,cAAtB,QAA4C,4BAA5C;AAIA,OAAO,SAASC,WAAT,CAAqBC,QAArB,EAA0C;EAC/C,MAAMC,QAAQ,GAAGR,WAAW,EAA5B;EAEAC,SAAS,CAAC,MAAM;IACdO,QAAQ,CAACJ,WAAW,CAAC,EAAE,GAAGG,QAAL;MAAeE,MAAM,EAAE;IAAvB,CAAD,CAAZ,CAAR;EACD,CAFQ,EAEN,CAACF,QAAD,EAAWC,QAAX,CAFM,CAAT;AAGD;AAED,OAAO,SAASE,gBAAT,CACLC,GADK,EAImB;EAAA,IAFxBC,YAEwB,uEAFN,IAEM;EAAA,IADxBC,QACwB;EACxB,MAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBb,QAAQ,CAAIU,YAAJ,CAAhC;EACA,MAAMJ,QAAQ,GAAGR,WAAW,EAA5B;;EAEA,eAAegB,OAAf,GAAyB;IACvB,MAAMC,MAAM,GAAG,MAAMd,KAAK,CAACe,GAAN,CAAUP,GAAV,CAArB;IACA,OAAOM,MAAM,CAACH,IAAd;EACD;;EAEDb,SAAS,CAAC,MAAM;IACde,OAAO,GACJG,IADH,CACSL,IAAD,IAAU;MACd,IAAID,QAAJ,EAAc;QACZA,QAAQ,CAACC,IAAD,CAAR;MACD;;MAEDM,UAAU,CAAC,MAAMZ,QAAQ,CAACH,cAAc,CAAC;QAAEgB,SAAS,EAAE,IAAb;QAAmBZ,MAAM,EAAE;MAA3B,CAAD,CAAf,CAAf,EAAoE,GAApE,CAAV;MAEAM,OAAO,CAACD,IAAD,CAAP;IACD,CATH,EAUGQ,KAVH,CAUSC,OAAO,CAACC,KAVjB;EAWD,CAZQ,EAYN,CAACb,GAAD,EAAMH,QAAN,CAZM,CAAT;EAcA,OAAO,CAACM,IAAD,EAAOC,OAAP,CAAP;AACD"},"metadata":{},"sourceType":"module"}