{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (_isNativeReflectConstruct()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport toChildrenArray from \"rc-util/es/Children/toArray\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport FieldContext, { HOOK_MARK } from './FieldContext';\nimport { toArray } from './utils/typeUtil';\nimport { validateRules } from './utils/validateUtil';\nimport { containsNamePath, defaultGetValueFromEvent, getNamePath, getValue } from './utils/valueUtil';\n\nfunction requireUpdate(shouldUpdate, prev, next, prevValue, nextValue, info) {\n  if (typeof shouldUpdate === 'function') {\n    return shouldUpdate(prev, next, 'source' in info ? {\n      source: info.source\n    } : {});\n  }\n\n  return prevValue !== nextValue;\n} // We use Class instead of Hooks here since it will cost much code by using Hooks.\n\n\nvar Field = /*#__PURE__*/function (_React$Component) {\n  _inherits(Field, _React$Component);\n\n  var _super = _createSuper(Field);\n\n  function Field() {\n    var _this;\n\n    _classCallCheck(this, Field);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      resetCount: 0\n    };\n    _this.cancelRegisterFunc = null;\n    _this.destroy = false;\n    /**\n     * Follow state should not management in State since it will async update by React.\n     * This makes first render of form can not get correct state value.\n     */\n\n    _this.touched = false;\n    /** Mark when touched & validated. Currently only used for `dependencies` */\n\n    _this.dirty = false;\n    _this.validatePromise = null;\n    _this.errors = [];\n\n    _this.cancelRegister = function () {\n      var preserve = _this.props.preserve;\n\n      if (_this.cancelRegisterFunc) {\n        _this.cancelRegisterFunc(preserve);\n      }\n\n      _this.cancelRegisterFunc = null;\n    }; // ================================== Utils ==================================\n\n\n    _this.getNamePath = function () {\n      var name = _this.props.name;\n      var _this$context$prefixN = _this.context.prefixName,\n          prefixName = _this$context$prefixN === void 0 ? [] : _this$context$prefixN;\n      return name !== undefined ? [].concat(_toConsumableArray(prefixName), _toConsumableArray(name)) : [];\n    };\n\n    _this.getRules = function () {\n      var _this$props$rules = _this.props.rules,\n          rules = _this$props$rules === void 0 ? [] : _this$props$rules;\n      return rules.map(function (rule) {\n        if (typeof rule === 'function') {\n          return rule(_this.context);\n        }\n\n        return rule;\n      });\n    };\n\n    _this.refresh = function () {\n      if (_this.destroy) return;\n      /**\n       * Clean up current node.\n       */\n\n      _this.setState(function (_ref) {\n        var resetCount = _ref.resetCount;\n        return {\n          resetCount: resetCount + 1\n        };\n      });\n    }; // ========================= Field Entity Interfaces =========================\n    // Trigger by store update. Check if need update the component\n\n\n    _this.onStoreChange = function (prevStore, namePathList, info) {\n      var _this$props = _this.props,\n          shouldUpdate = _this$props.shouldUpdate,\n          _this$props$dependenc = _this$props.dependencies,\n          dependencies = _this$props$dependenc === void 0 ? [] : _this$props$dependenc,\n          onReset = _this$props.onReset;\n      var store = info.store;\n\n      var namePath = _this.getNamePath();\n\n      var prevValue = _this.getValue(prevStore);\n\n      var curValue = _this.getValue(store);\n\n      var namePathMatch = namePathList && containsNamePath(namePathList, namePath); // `setFieldsValue` is a quick access to update related status\n\n      if (info.type === 'valueUpdate' && info.source === 'external' && prevValue !== curValue) {\n        _this.touched = true;\n        _this.dirty = true;\n        _this.validatePromise = null;\n        _this.errors = [];\n      }\n\n      switch (info.type) {\n        case 'reset':\n          if (!namePathList || namePathMatch) {\n            // Clean up state\n            _this.touched = false;\n            _this.dirty = false;\n            _this.validatePromise = null;\n            _this.errors = [];\n\n            if (onReset) {\n              onReset();\n            }\n\n            _this.refresh();\n\n            return;\n          }\n\n          break;\n\n        case 'setField':\n          {\n            if (namePathMatch) {\n              var data = info.data;\n\n              if ('touched' in data) {\n                _this.touched = data.touched;\n              }\n\n              if ('validating' in data && !('originRCField' in data)) {\n                _this.validatePromise = data.validating ? Promise.resolve([]) : null;\n              }\n\n              if ('errors' in data) {\n                _this.errors = data.errors || [];\n              }\n\n              _this.dirty = true;\n\n              _this.reRender();\n\n              return;\n            } // Handle update by `setField` with `shouldUpdate`\n\n\n            if (shouldUpdate && !namePath.length && requireUpdate(shouldUpdate, prevStore, store, prevValue, curValue, info)) {\n              _this.reRender();\n\n              return;\n            }\n\n            break;\n          }\n\n        case 'dependenciesUpdate':\n          {\n            /**\n             * Trigger when marked `dependencies` updated. Related fields will all update\n             */\n            var dependencyList = dependencies.map(getNamePath);\n\n            if (namePathMatch || dependencyList.some(function (dependency) {\n              return containsNamePath(info.relatedFields, dependency);\n            })) {\n              _this.reRender();\n\n              return;\n            }\n\n            break;\n          }\n\n        default:\n          /**\n           * - If `namePath` exists in `namePathList`, means it's related value and should update.\n           * - If `dependencies` exists in `namePathList`, means upstream trigger update.\n           * - If `shouldUpdate` provided, use customize logic to update the field\n           *   - else to check if value changed\n           */\n          if (namePathMatch || dependencies.some(function (dependency) {\n            return containsNamePath(namePathList, getNamePath(dependency));\n          }) || requireUpdate(shouldUpdate, prevStore, store, prevValue, curValue, info)) {\n            _this.reRender();\n\n            return;\n          }\n\n          break;\n      }\n\n      if (shouldUpdate === true) {\n        _this.reRender();\n      }\n    };\n\n    _this.validateRules = function (options) {\n      var _this$props2 = _this.props,\n          _this$props2$validate = _this$props2.validateFirst,\n          validateFirst = _this$props2$validate === void 0 ? false : _this$props2$validate,\n          messageVariables = _this$props2.messageVariables;\n\n      var _ref2 = options || {},\n          triggerName = _ref2.triggerName;\n\n      var namePath = _this.getNamePath();\n\n      var filteredRules = _this.getRules();\n\n      if (triggerName) {\n        filteredRules = filteredRules.filter(function (rule) {\n          var validateTrigger = rule.validateTrigger;\n\n          if (!validateTrigger) {\n            return true;\n          }\n\n          var triggerList = toArray(validateTrigger);\n          return triggerList.includes(triggerName);\n        });\n      }\n\n      var promise = validateRules(namePath, _this.getValue(), filteredRules, options, validateFirst, messageVariables);\n      _this.dirty = true;\n      _this.validatePromise = promise;\n      _this.errors = [];\n      promise.catch(function (e) {\n        return e;\n      }).then(function () {\n        var errors = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n        if (_this.validatePromise === promise) {\n          _this.validatePromise = null;\n          _this.errors = errors;\n\n          _this.reRender();\n        }\n      });\n      return promise;\n    };\n\n    _this.isFieldValidating = function () {\n      return !!_this.validatePromise;\n    };\n\n    _this.isFieldTouched = function () {\n      return _this.touched;\n    };\n\n    _this.isFieldDirty = function () {\n      return _this.dirty;\n    };\n\n    _this.getErrors = function () {\n      return _this.errors;\n    }; // ============================= Child Component =============================\n\n\n    _this.getMeta = function () {\n      // Make error & validating in cache to save perf\n      _this.prevValidating = _this.isFieldValidating();\n      var meta = {\n        touched: _this.isFieldTouched(),\n        validating: _this.prevValidating,\n        errors: _this.errors,\n        name: _this.getNamePath()\n      };\n      return meta;\n    }; // Only return validate child node. If invalidate, will do nothing about field.\n\n\n    _this.getOnlyChild = function (children) {\n      // Support render props\n      if (typeof children === 'function') {\n        var meta = _this.getMeta();\n\n        return _objectSpread({}, _this.getOnlyChild(children(_this.getControlled(), meta, _this.context)), {\n          isFunction: true\n        });\n      } // Filed element only\n\n\n      var childList = toChildrenArray(children);\n\n      if (childList.length !== 1 || !React.isValidElement(childList[0])) {\n        return {\n          child: childList,\n          isFunction: false\n        };\n      }\n\n      return {\n        child: childList[0],\n        isFunction: false\n      };\n    }; // ============================== Field Control ==============================\n\n\n    _this.getValue = function (store) {\n      var getFieldsValue = _this.context.getFieldsValue;\n\n      var namePath = _this.getNamePath();\n\n      return getValue(store || getFieldsValue(true), namePath);\n    };\n\n    _this.getControlled = function () {\n      var childProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$props3 = _this.props,\n          trigger = _this$props3.trigger,\n          validateTrigger = _this$props3.validateTrigger,\n          getValueFromEvent = _this$props3.getValueFromEvent,\n          normalize = _this$props3.normalize,\n          valuePropName = _this$props3.valuePropName,\n          getValueProps = _this$props3.getValueProps;\n      var mergedValidateTrigger = validateTrigger !== undefined ? validateTrigger : _this.context.validateTrigger;\n\n      var namePath = _this.getNamePath();\n\n      var _this$context = _this.context,\n          getInternalHooks = _this$context.getInternalHooks,\n          getFieldsValue = _this$context.getFieldsValue;\n\n      var _getInternalHooks = getInternalHooks(HOOK_MARK),\n          dispatch = _getInternalHooks.dispatch;\n\n      var value = _this.getValue();\n\n      var mergedGetValueProps = getValueProps || function (val) {\n        return _defineProperty({}, valuePropName, val);\n      }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n      var originTriggerFunc = childProps[trigger];\n\n      var control = _objectSpread({}, childProps, {}, mergedGetValueProps(value)); // Add trigger\n\n\n      control[trigger] = function () {\n        // Mark as touched\n        _this.touched = true;\n        _this.dirty = true;\n        var newValue;\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        if (getValueFromEvent) {\n          newValue = getValueFromEvent.apply(void 0, args);\n        } else {\n          newValue = defaultGetValueFromEvent.apply(void 0, [valuePropName].concat(args));\n        }\n\n        if (normalize) {\n          newValue = normalize(newValue, value, getFieldsValue(true));\n        }\n\n        dispatch({\n          type: 'updateValue',\n          namePath: namePath,\n          value: newValue\n        });\n\n        if (originTriggerFunc) {\n          originTriggerFunc.apply(void 0, args);\n        }\n      }; // Add validateTrigger\n\n\n      var validateTriggerList = toArray(mergedValidateTrigger || []);\n      validateTriggerList.forEach(function (triggerName) {\n        // Wrap additional function of component, so that we can get latest value from store\n        var originTrigger = control[triggerName];\n\n        control[triggerName] = function () {\n          if (originTrigger) {\n            originTrigger.apply(void 0, arguments);\n          } // Always use latest rules\n\n\n          var rules = _this.props.rules;\n\n          if (rules && rules.length) {\n            // We dispatch validate to root,\n            // since it will update related data with other field with same name\n            dispatch({\n              type: 'validateField',\n              namePath: namePath,\n              triggerName: triggerName\n            });\n          }\n        };\n      });\n      return control;\n    };\n\n    return _this;\n  } // ============================== Subscriptions ==============================\n\n\n  _createClass(Field, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var shouldUpdate = this.props.shouldUpdate;\n      var getInternalHooks = this.context.getInternalHooks;\n\n      var _getInternalHooks2 = getInternalHooks(HOOK_MARK),\n          registerField = _getInternalHooks2.registerField;\n\n      this.cancelRegisterFunc = registerField(this); // One more render for component in case fields not ready\n\n      if (shouldUpdate === true) {\n        this.reRender();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cancelRegister();\n      this.destroy = true;\n    }\n  }, {\n    key: \"reRender\",\n    value: function reRender() {\n      if (this.destroy) return;\n      this.forceUpdate();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var resetCount = this.state.resetCount;\n      var children = this.props.children;\n\n      var _this$getOnlyChild = this.getOnlyChild(children),\n          child = _this$getOnlyChild.child,\n          isFunction = _this$getOnlyChild.isFunction; // Not need to `cloneElement` since user can handle this in render function self\n\n\n      var returnChildNode;\n\n      if (isFunction) {\n        returnChildNode = child;\n      } else if (React.isValidElement(child)) {\n        returnChildNode = React.cloneElement(child, this.getControlled(child.props));\n      } else {\n        warning(!child, '`children` of Field is not validate ReactElement.');\n        returnChildNode = child;\n      }\n\n      return React.createElement(React.Fragment, {\n        key: resetCount\n      }, returnChildNode);\n    }\n  }]);\n\n  return Field;\n}(React.Component);\n\nField.contextType = FieldContext;\nField.defaultProps = {\n  trigger: 'onChange',\n  valuePropName: 'value'\n};\n\nvar WrapperField = function WrapperField(_ref4) {\n  var name = _ref4.name,\n      isListField = _ref4.isListField,\n      restProps = _objectWithoutProperties(_ref4, [\"name\", \"isListField\"]);\n\n  var namePath = name !== undefined ? getNamePath(name) : undefined;\n  var key = 'keep';\n\n  if (!isListField) {\n    key = \"_\".concat((namePath || []).join('_'));\n  }\n\n  return React.createElement(Field, Object.assign({\n    key: key,\n    name: namePath\n  }, restProps));\n};\n\nexport default WrapperField;","map":{"version":3,"names":["_objectWithoutProperties","_defineProperty","_toConsumableArray","_classCallCheck","_createClass","_inherits","_possibleConstructorReturn","_getPrototypeOf","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","Super","result","_isNativeReflectConstruct","NewTarget","constructor","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","toChildrenArray","warning","React","FieldContext","HOOK_MARK","toArray","validateRules","containsNamePath","defaultGetValueFromEvent","getNamePath","getValue","requireUpdate","shouldUpdate","prev","next","prevValue","nextValue","info","Field","_React$Component","_super","_this","state","resetCount","cancelRegisterFunc","destroy","touched","dirty","validatePromise","errors","cancelRegister","preserve","props","name","_this$context$prefixN","context","prefixName","undefined","concat","getRules","_this$props$rules","rules","map","rule","refresh","setState","_ref","onStoreChange","prevStore","namePathList","_this$props","_this$props$dependenc","dependencies","onReset","store","namePath","curValue","namePathMatch","type","data","validating","Promise","resolve","reRender","dependencyList","some","dependency","relatedFields","options","_this$props2","_this$props2$validate","validateFirst","messageVariables","_ref2","triggerName","filteredRules","validateTrigger","triggerList","includes","promise","catch","then","isFieldValidating","isFieldTouched","isFieldDirty","getErrors","getMeta","prevValidating","meta","getOnlyChild","children","getControlled","isFunction","childList","isValidElement","child","getFieldsValue","childProps","_this$props3","trigger","getValueFromEvent","normalize","valuePropName","getValueProps","mergedValidateTrigger","_this$context","getInternalHooks","_getInternalHooks","dispatch","value","mergedGetValueProps","val","originTriggerFunc","control","newValue","_len","args","Array","_key","validateTriggerList","originTrigger","componentDidMount","_getInternalHooks2","registerField","componentWillUnmount","forceUpdate","render","_this$getOnlyChild","returnChildNode","cloneElement","createElement","Fragment","Component","contextType","defaultProps","WrapperField","_ref4","isListField","restProps","join","assign"],"sources":["E:/Work/PFE/Project folder/react/node_modules/rc-field-form/es/Field.js"],"sourcesContent":["import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport toChildrenArray from \"rc-util/es/Children/toArray\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport FieldContext, { HOOK_MARK } from './FieldContext';\nimport { toArray } from './utils/typeUtil';\nimport { validateRules } from './utils/validateUtil';\nimport { containsNamePath, defaultGetValueFromEvent, getNamePath, getValue } from './utils/valueUtil';\n\nfunction requireUpdate(shouldUpdate, prev, next, prevValue, nextValue, info) {\n  if (typeof shouldUpdate === 'function') {\n    return shouldUpdate(prev, next, 'source' in info ? {\n      source: info.source\n    } : {});\n  }\n\n  return prevValue !== nextValue;\n} // We use Class instead of Hooks here since it will cost much code by using Hooks.\n\n\nvar Field = /*#__PURE__*/function (_React$Component) {\n  _inherits(Field, _React$Component);\n\n  var _super = _createSuper(Field);\n\n  function Field() {\n    var _this;\n\n    _classCallCheck(this, Field);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      resetCount: 0\n    };\n    _this.cancelRegisterFunc = null;\n    _this.destroy = false;\n    /**\n     * Follow state should not management in State since it will async update by React.\n     * This makes first render of form can not get correct state value.\n     */\n\n    _this.touched = false;\n    /** Mark when touched & validated. Currently only used for `dependencies` */\n\n    _this.dirty = false;\n    _this.validatePromise = null;\n    _this.errors = [];\n\n    _this.cancelRegister = function () {\n      var preserve = _this.props.preserve;\n\n      if (_this.cancelRegisterFunc) {\n        _this.cancelRegisterFunc(preserve);\n      }\n\n      _this.cancelRegisterFunc = null;\n    }; // ================================== Utils ==================================\n\n\n    _this.getNamePath = function () {\n      var name = _this.props.name;\n      var _this$context$prefixN = _this.context.prefixName,\n          prefixName = _this$context$prefixN === void 0 ? [] : _this$context$prefixN;\n      return name !== undefined ? [].concat(_toConsumableArray(prefixName), _toConsumableArray(name)) : [];\n    };\n\n    _this.getRules = function () {\n      var _this$props$rules = _this.props.rules,\n          rules = _this$props$rules === void 0 ? [] : _this$props$rules;\n      return rules.map(function (rule) {\n        if (typeof rule === 'function') {\n          return rule(_this.context);\n        }\n\n        return rule;\n      });\n    };\n\n    _this.refresh = function () {\n      if (_this.destroy) return;\n      /**\n       * Clean up current node.\n       */\n\n      _this.setState(function (_ref) {\n        var resetCount = _ref.resetCount;\n        return {\n          resetCount: resetCount + 1\n        };\n      });\n    }; // ========================= Field Entity Interfaces =========================\n    // Trigger by store update. Check if need update the component\n\n\n    _this.onStoreChange = function (prevStore, namePathList, info) {\n      var _this$props = _this.props,\n          shouldUpdate = _this$props.shouldUpdate,\n          _this$props$dependenc = _this$props.dependencies,\n          dependencies = _this$props$dependenc === void 0 ? [] : _this$props$dependenc,\n          onReset = _this$props.onReset;\n      var store = info.store;\n\n      var namePath = _this.getNamePath();\n\n      var prevValue = _this.getValue(prevStore);\n\n      var curValue = _this.getValue(store);\n\n      var namePathMatch = namePathList && containsNamePath(namePathList, namePath); // `setFieldsValue` is a quick access to update related status\n\n      if (info.type === 'valueUpdate' && info.source === 'external' && prevValue !== curValue) {\n        _this.touched = true;\n        _this.dirty = true;\n        _this.validatePromise = null;\n        _this.errors = [];\n      }\n\n      switch (info.type) {\n        case 'reset':\n          if (!namePathList || namePathMatch) {\n            // Clean up state\n            _this.touched = false;\n            _this.dirty = false;\n            _this.validatePromise = null;\n            _this.errors = [];\n\n            if (onReset) {\n              onReset();\n            }\n\n            _this.refresh();\n\n            return;\n          }\n\n          break;\n\n        case 'setField':\n          {\n            if (namePathMatch) {\n              var data = info.data;\n\n              if ('touched' in data) {\n                _this.touched = data.touched;\n              }\n\n              if ('validating' in data && !('originRCField' in data)) {\n                _this.validatePromise = data.validating ? Promise.resolve([]) : null;\n              }\n\n              if ('errors' in data) {\n                _this.errors = data.errors || [];\n              }\n\n              _this.dirty = true;\n\n              _this.reRender();\n\n              return;\n            } // Handle update by `setField` with `shouldUpdate`\n\n\n            if (shouldUpdate && !namePath.length && requireUpdate(shouldUpdate, prevStore, store, prevValue, curValue, info)) {\n              _this.reRender();\n\n              return;\n            }\n\n            break;\n          }\n\n        case 'dependenciesUpdate':\n          {\n            /**\n             * Trigger when marked `dependencies` updated. Related fields will all update\n             */\n            var dependencyList = dependencies.map(getNamePath);\n\n            if (namePathMatch || dependencyList.some(function (dependency) {\n              return containsNamePath(info.relatedFields, dependency);\n            })) {\n              _this.reRender();\n\n              return;\n            }\n\n            break;\n          }\n\n        default:\n          /**\n           * - If `namePath` exists in `namePathList`, means it's related value and should update.\n           * - If `dependencies` exists in `namePathList`, means upstream trigger update.\n           * - If `shouldUpdate` provided, use customize logic to update the field\n           *   - else to check if value changed\n           */\n          if (namePathMatch || dependencies.some(function (dependency) {\n            return containsNamePath(namePathList, getNamePath(dependency));\n          }) || requireUpdate(shouldUpdate, prevStore, store, prevValue, curValue, info)) {\n            _this.reRender();\n\n            return;\n          }\n\n          break;\n      }\n\n      if (shouldUpdate === true) {\n        _this.reRender();\n      }\n    };\n\n    _this.validateRules = function (options) {\n      var _this$props2 = _this.props,\n          _this$props2$validate = _this$props2.validateFirst,\n          validateFirst = _this$props2$validate === void 0 ? false : _this$props2$validate,\n          messageVariables = _this$props2.messageVariables;\n\n      var _ref2 = options || {},\n          triggerName = _ref2.triggerName;\n\n      var namePath = _this.getNamePath();\n\n      var filteredRules = _this.getRules();\n\n      if (triggerName) {\n        filteredRules = filteredRules.filter(function (rule) {\n          var validateTrigger = rule.validateTrigger;\n\n          if (!validateTrigger) {\n            return true;\n          }\n\n          var triggerList = toArray(validateTrigger);\n          return triggerList.includes(triggerName);\n        });\n      }\n\n      var promise = validateRules(namePath, _this.getValue(), filteredRules, options, validateFirst, messageVariables);\n      _this.dirty = true;\n      _this.validatePromise = promise;\n      _this.errors = [];\n      promise.catch(function (e) {\n        return e;\n      }).then(function () {\n        var errors = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n        if (_this.validatePromise === promise) {\n          _this.validatePromise = null;\n          _this.errors = errors;\n\n          _this.reRender();\n        }\n      });\n      return promise;\n    };\n\n    _this.isFieldValidating = function () {\n      return !!_this.validatePromise;\n    };\n\n    _this.isFieldTouched = function () {\n      return _this.touched;\n    };\n\n    _this.isFieldDirty = function () {\n      return _this.dirty;\n    };\n\n    _this.getErrors = function () {\n      return _this.errors;\n    }; // ============================= Child Component =============================\n\n\n    _this.getMeta = function () {\n      // Make error & validating in cache to save perf\n      _this.prevValidating = _this.isFieldValidating();\n      var meta = {\n        touched: _this.isFieldTouched(),\n        validating: _this.prevValidating,\n        errors: _this.errors,\n        name: _this.getNamePath()\n      };\n      return meta;\n    }; // Only return validate child node. If invalidate, will do nothing about field.\n\n\n    _this.getOnlyChild = function (children) {\n      // Support render props\n      if (typeof children === 'function') {\n        var meta = _this.getMeta();\n\n        return _objectSpread({}, _this.getOnlyChild(children(_this.getControlled(), meta, _this.context)), {\n          isFunction: true\n        });\n      } // Filed element only\n\n\n      var childList = toChildrenArray(children);\n\n      if (childList.length !== 1 || !React.isValidElement(childList[0])) {\n        return {\n          child: childList,\n          isFunction: false\n        };\n      }\n\n      return {\n        child: childList[0],\n        isFunction: false\n      };\n    }; // ============================== Field Control ==============================\n\n\n    _this.getValue = function (store) {\n      var getFieldsValue = _this.context.getFieldsValue;\n\n      var namePath = _this.getNamePath();\n\n      return getValue(store || getFieldsValue(true), namePath);\n    };\n\n    _this.getControlled = function () {\n      var childProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$props3 = _this.props,\n          trigger = _this$props3.trigger,\n          validateTrigger = _this$props3.validateTrigger,\n          getValueFromEvent = _this$props3.getValueFromEvent,\n          normalize = _this$props3.normalize,\n          valuePropName = _this$props3.valuePropName,\n          getValueProps = _this$props3.getValueProps;\n      var mergedValidateTrigger = validateTrigger !== undefined ? validateTrigger : _this.context.validateTrigger;\n\n      var namePath = _this.getNamePath();\n\n      var _this$context = _this.context,\n          getInternalHooks = _this$context.getInternalHooks,\n          getFieldsValue = _this$context.getFieldsValue;\n\n      var _getInternalHooks = getInternalHooks(HOOK_MARK),\n          dispatch = _getInternalHooks.dispatch;\n\n      var value = _this.getValue();\n\n      var mergedGetValueProps = getValueProps || function (val) {\n        return _defineProperty({}, valuePropName, val);\n      }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n      var originTriggerFunc = childProps[trigger];\n\n      var control = _objectSpread({}, childProps, {}, mergedGetValueProps(value)); // Add trigger\n\n\n      control[trigger] = function () {\n        // Mark as touched\n        _this.touched = true;\n        _this.dirty = true;\n        var newValue;\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        if (getValueFromEvent) {\n          newValue = getValueFromEvent.apply(void 0, args);\n        } else {\n          newValue = defaultGetValueFromEvent.apply(void 0, [valuePropName].concat(args));\n        }\n\n        if (normalize) {\n          newValue = normalize(newValue, value, getFieldsValue(true));\n        }\n\n        dispatch({\n          type: 'updateValue',\n          namePath: namePath,\n          value: newValue\n        });\n\n        if (originTriggerFunc) {\n          originTriggerFunc.apply(void 0, args);\n        }\n      }; // Add validateTrigger\n\n\n      var validateTriggerList = toArray(mergedValidateTrigger || []);\n      validateTriggerList.forEach(function (triggerName) {\n        // Wrap additional function of component, so that we can get latest value from store\n        var originTrigger = control[triggerName];\n\n        control[triggerName] = function () {\n          if (originTrigger) {\n            originTrigger.apply(void 0, arguments);\n          } // Always use latest rules\n\n\n          var rules = _this.props.rules;\n\n          if (rules && rules.length) {\n            // We dispatch validate to root,\n            // since it will update related data with other field with same name\n            dispatch({\n              type: 'validateField',\n              namePath: namePath,\n              triggerName: triggerName\n            });\n          }\n        };\n      });\n      return control;\n    };\n\n    return _this;\n  } // ============================== Subscriptions ==============================\n\n\n  _createClass(Field, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var shouldUpdate = this.props.shouldUpdate;\n      var getInternalHooks = this.context.getInternalHooks;\n\n      var _getInternalHooks2 = getInternalHooks(HOOK_MARK),\n          registerField = _getInternalHooks2.registerField;\n\n      this.cancelRegisterFunc = registerField(this); // One more render for component in case fields not ready\n\n      if (shouldUpdate === true) {\n        this.reRender();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cancelRegister();\n      this.destroy = true;\n    }\n  }, {\n    key: \"reRender\",\n    value: function reRender() {\n      if (this.destroy) return;\n      this.forceUpdate();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var resetCount = this.state.resetCount;\n      var children = this.props.children;\n\n      var _this$getOnlyChild = this.getOnlyChild(children),\n          child = _this$getOnlyChild.child,\n          isFunction = _this$getOnlyChild.isFunction; // Not need to `cloneElement` since user can handle this in render function self\n\n\n      var returnChildNode;\n\n      if (isFunction) {\n        returnChildNode = child;\n      } else if (React.isValidElement(child)) {\n        returnChildNode = React.cloneElement(child, this.getControlled(child.props));\n      } else {\n        warning(!child, '`children` of Field is not validate ReactElement.');\n        returnChildNode = child;\n      }\n\n      return React.createElement(React.Fragment, {\n        key: resetCount\n      }, returnChildNode);\n    }\n  }]);\n\n  return Field;\n}(React.Component);\n\nField.contextType = FieldContext;\nField.defaultProps = {\n  trigger: 'onChange',\n  valuePropName: 'value'\n};\n\nvar WrapperField = function WrapperField(_ref4) {\n  var name = _ref4.name,\n      isListField = _ref4.isListField,\n      restProps = _objectWithoutProperties(_ref4, [\"name\", \"isListField\"]);\n\n  var namePath = name !== undefined ? getNamePath(name) : undefined;\n  var key = 'keep';\n\n  if (!isListField) {\n    key = \"_\".concat((namePath || []).join('_'));\n  }\n\n  return React.createElement(Field, Object.assign({\n    key: key,\n    name: namePath\n  }, restProps));\n};\n\nexport default WrapperField;"],"mappings":"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"},"metadata":{},"sourceType":"module"}