{"ast":null,"code":"function __$styleInject(css) {\n  if (!css) return;\n  if (typeof window == 'undefined') return;\n  var style = document.createElement('style');\n  style.setAttribute('media', 'screen');\n  style.innerHTML = css;\n  document.head.appendChild(style);\n  return css;\n}\n\nimport React, { forwardRef, useState, useRef, useCallback, useImperativeHandle, memo, useMemo } from 'react';\nimport AntModal from 'antd/es/modal';\nimport AntUpload from 'antd/es/upload';\nimport LocaleReceiver from 'antd/es/locale-provider/LocaleReceiver';\nimport AntSlider from 'antd/es/slider';\nimport Cropper from 'react-easy-crop';\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nfunction __generator(thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\n\nvar PREFIX = 'img-crop';\nvar INIT_ZOOM = 1;\nvar ZOOM_STEP = 0.1;\nvar INIT_ROTATE = 0;\nvar ROTATE_STEP = 1;\nvar MIN_ROTATE = -180;\nvar MAX_ROTATE = 180;\nvar EasyCrop = forwardRef(function (props, ref) {\n  var cropperRef = props.cropperRef,\n      image = props.image,\n      aspect = props.aspect,\n      shape = props.shape,\n      grid = props.grid,\n      zoom = props.zoom,\n      rotate = props.rotate,\n      minZoom = props.minZoom,\n      maxZoom = props.maxZoom,\n      cropperProps = props.cropperProps;\n\n  var _a = useState({\n    x: 0,\n    y: 0\n  }),\n      crop = _a[0],\n      onCropChange = _a[1];\n\n  var _b = useState({\n    width: 0,\n    height: 0\n  }),\n      cropSize = _b[0],\n      setCropSize = _b[1];\n\n  var _c = useState(INIT_ZOOM),\n      zoomVal = _c[0],\n      setZoomVal = _c[1];\n\n  var _d = useState(INIT_ROTATE),\n      rotateVal = _d[0],\n      setRotateVal = _d[1];\n\n  var cropPixelsRef = useRef({\n    width: 0,\n    height: 0,\n    x: 0,\n    y: 0\n  });\n  var onMediaLoaded = useCallback(function (mediaSize) {\n    var width = mediaSize.width,\n        height = mediaSize.height;\n    var ratioWidth = height * aspect;\n\n    if (width > ratioWidth) {\n      setCropSize({\n        width: ratioWidth,\n        height: height\n      });\n    } else {\n      setCropSize({\n        width: width,\n        height: width / aspect\n      });\n    }\n  }, [aspect]);\n  var onCropComplete = useCallback(function (croppedArea, croppedAreaPixels) {\n    cropPixelsRef.current = croppedAreaPixels;\n  }, []);\n  useImperativeHandle(ref, function () {\n    return {\n      rotateVal: rotateVal,\n      setZoomVal: setZoomVal,\n      setRotateVal: setRotateVal,\n      cropPixelsRef: cropPixelsRef\n    };\n  }, [rotateVal]);\n  return React.createElement(React.Fragment, null, React.createElement(Cropper, __assign({}, cropperProps, {\n    ref: cropperRef,\n    image: image,\n    crop: crop,\n    cropSize: cropSize,\n    onCropChange: onCropChange,\n    aspect: aspect,\n    cropShape: shape,\n    showGrid: grid,\n    zoomWithScroll: zoom,\n    zoom: zoomVal,\n    rotation: rotateVal,\n    onZoomChange: setZoomVal,\n    onRotationChange: setRotateVal,\n    minZoom: minZoom,\n    maxZoom: maxZoom,\n    onMediaLoaded: onMediaLoaded,\n    onCropComplete: onCropComplete,\n    classes: {\n      containerClassName: \"\".concat(PREFIX, \"-container\"),\n      mediaClassName: \"\".concat(PREFIX, \"-media\")\n    }\n  })), zoom && React.createElement(\"section\", {\n    className: \"\".concat(PREFIX, \"-control \").concat(PREFIX, \"-control-zoom\")\n  }, React.createElement(\"button\", {\n    onClick: function () {\n      return setZoomVal(zoomVal - ZOOM_STEP);\n    },\n    disabled: zoomVal - ZOOM_STEP < minZoom\n  }, \"\\uFF0D\"), React.createElement(AntSlider, {\n    min: minZoom,\n    max: maxZoom,\n    step: ZOOM_STEP,\n    value: zoomVal,\n    onChange: setZoomVal\n  }), React.createElement(\"button\", {\n    onClick: function () {\n      return setZoomVal(zoomVal + ZOOM_STEP);\n    },\n    disabled: zoomVal + ZOOM_STEP > maxZoom\n  }, \"\\uFF0B\")), rotate && React.createElement(\"section\", {\n    className: \"\".concat(PREFIX, \"-control \").concat(PREFIX, \"-control-rotate\")\n  }, React.createElement(\"button\", {\n    onClick: function () {\n      return setRotateVal(rotateVal - ROTATE_STEP);\n    },\n    disabled: rotateVal === MIN_ROTATE\n  }, \"\\u21BA\"), React.createElement(AntSlider, {\n    min: MIN_ROTATE,\n    max: MAX_ROTATE,\n    step: ROTATE_STEP,\n    value: rotateVal,\n    onChange: setRotateVal\n  }), React.createElement(\"button\", {\n    onClick: function () {\n      return setRotateVal(rotateVal + ROTATE_STEP);\n    },\n    disabled: rotateVal === MAX_ROTATE\n  }, \"\\u21BB\")));\n});\nvar EasyCrop$1 = memo(EasyCrop);\n\n__$styleInject(\".img-crop-modal .img-crop-container {\\n  position: relative;\\n  width: 100%;\\n  height: 40vh;\\n}\\n.img-crop-modal .img-crop-control {\\n  display: flex;\\n  align-items: center;\\n  width: 60%;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n.img-crop-modal .img-crop-control:first-of-type {\\n  margin-top: 16px;\\n}\\n.img-crop-modal .img-crop-control:last-of-type {\\n  margin-bottom: -8px;\\n}\\n.img-crop-modal .img-crop-control button {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  width: 34px;\\n  height: 34px;\\n  padding: 0;\\n  font-style: normal;\\n  background: transparent;\\n  border: 0;\\n  outline: 0;\\n  cursor: pointer;\\n}\\n.img-crop-modal .img-crop-control button[disabled] {\\n  cursor: default;\\n}\\n.img-crop-modal .img-crop-control button + div:only-of-type {\\n  flex: 1;\\n  margin: 0 8px;\\n}\\n.img-crop-modal .img-crop-control-zoom button {\\n  font-size: 18px;\\n}\\n.img-crop-modal .img-crop-control-rotate button {\\n  font-size: 16px;\\n}\\n.img-crop-modal .img-crop-control-rotate button:first-of-type {\\n  transform: rotate(-20deg);\\n}\\n.img-crop-modal .img-crop-control-rotate button:last-of-type {\\n  transform: rotate(20deg);\\n}\\n\");\n\nvar ImgCrop = forwardRef(function (props, ref) {\n  var _a = props.aspect,\n      aspect = _a === void 0 ? 1 : _a,\n      _b = props.shape,\n      shape = _b === void 0 ? 'rect' : _b,\n      _c = props.grid,\n      grid = _c === void 0 ? false : _c,\n      _d = props.quality,\n      quality = _d === void 0 ? 0.4 : _d,\n      _e = props.fillColor,\n      fillColor = _e === void 0 ? 'white' : _e,\n      _f = props.zoom,\n      zoom = _f === void 0 ? true : _f,\n      _g = props.rotate,\n      rotate = _g === void 0 ? false : _g,\n      _h = props.minZoom,\n      minZoom = _h === void 0 ? 1 : _h,\n      _j = props.maxZoom,\n      maxZoom = _j === void 0 ? 3 : _j,\n      modalTitle = props.modalTitle,\n      modalWidth = props.modalWidth,\n      modalOk = props.modalOk,\n      modalCancel = props.modalCancel,\n      modalMaskTransitionName = props.modalMaskTransitionName,\n      modalTransitionName = props.modalTransitionName,\n      onModalOk = props.onModalOk,\n      onModalCancel = props.onModalCancel,\n      beforeCrop = props.beforeCrop,\n      onUploadFail = props.onUploadFail,\n      cropperProps = props.cropperProps,\n      children = props.children;\n  var cb = useRef({});\n  cb.current.onModalOk = onModalOk;\n  cb.current.onModalCancel = onModalCancel;\n  cb.current.beforeCrop = beforeCrop;\n  cb.current.onUploadFail = onUploadFail;\n  /**\n   * Upload\n   */\n\n  var _k = useState(''),\n      image = _k[0],\n      setImage = _k[1];\n\n  var fileRef = useRef();\n  var beforeUploadRef = useRef();\n  var resolveRef = useRef();\n  var rejectRef = useRef();\n  var uploadComponent = useMemo(function () {\n    var upload = Array.isArray(children) ? children[0] : children;\n\n    var _a = upload.props,\n        beforeUpload = _a.beforeUpload,\n        accept = _a.accept,\n        restUploadProps = __rest(_a, [\"beforeUpload\", \"accept\"]);\n\n    beforeUploadRef.current = beforeUpload;\n    return __assign(__assign({}, upload), {\n      props: __assign(__assign({}, restUploadProps), {\n        accept: accept || 'image/*',\n        beforeUpload: function (file, fileList) {\n          return new Promise(function (resolve, reject) {\n            return __awaiter(void 0, void 0, void 0, function () {\n              var shouldCrop, reader;\n              return __generator(this, function (_a) {\n                switch (_a.label) {\n                  case 0:\n                    if (!cb.current.beforeCrop) return [3\n                    /*break*/\n                    , 2];\n                    return [4\n                    /*yield*/\n                    , cb.current.beforeCrop(file, fileList)];\n\n                  case 1:\n                    shouldCrop = _a.sent();\n                    if (!shouldCrop) return [2\n                    /*return*/\n                    , reject()];\n                    _a.label = 2;\n\n                  case 2:\n                    fileRef.current = file;\n\n                    resolveRef.current = function (newFile) {\n                      var _a, _b;\n\n                      (_b = (_a = cb.current).onModalOk) === null || _b === void 0 ? void 0 : _b.call(_a, newFile);\n                      resolve(newFile);\n                    };\n\n                    rejectRef.current = function (uploadErr) {\n                      var _a, _b;\n\n                      (_b = (_a = cb.current).onUploadFail) === null || _b === void 0 ? void 0 : _b.call(_a, uploadErr);\n                      reject();\n                    };\n\n                    reader = new FileReader();\n                    reader.addEventListener('load', function () {\n                      if (typeof reader.result === 'string') {\n                        setImage(reader.result);\n                      }\n                    });\n                    reader.readAsDataURL(file);\n                    return [2\n                    /*return*/\n                    ];\n                }\n              });\n            });\n          });\n        }\n      })\n    });\n  }, [children]);\n  /**\n   * Crop\n   */\n\n  var easyCropRef = useRef({});\n  /**\n   * Modal\n   */\n\n  var modalProps = useMemo(function () {\n    var obj = {\n      width: modalWidth,\n      okText: modalOk,\n      cancelText: modalCancel,\n      maskTransitionName: modalMaskTransitionName,\n      transitionName: modalTransitionName\n    };\n    Object.keys(obj).forEach(function (key) {\n      if (!obj[key]) delete obj[key];\n    });\n    return obj;\n  }, [modalCancel, modalMaskTransitionName, modalOk, modalTransitionName, modalWidth]);\n\n  var onClose = function () {\n    setImage('');\n    easyCropRef.current.setZoomVal(INIT_ZOOM);\n    easyCropRef.current.setRotateVal(INIT_ROTATE);\n  };\n\n  var onCancel = useCallback(function () {\n    var _a, _b;\n\n    (_b = (_a = cb.current).onModalCancel) === null || _b === void 0 ? void 0 : _b.call(_a);\n    onClose();\n  }, []);\n  var onOk = useCallback(function () {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var canvas, ctx, imgSource, _a, cropWidth, cropHeight, cropX, cropY, imgWidth, imgHeight, angle, sine, cosine, squareWidth, squareHeight, squareHalfWidth, squareHalfHeight, imgX, imgY, imgData, _b, type, name, uid;\n\n      return __generator(this, function (_c) {\n        onClose();\n        canvas = document.createElement('canvas');\n        ctx = canvas.getContext('2d');\n        imgSource = document.querySelector(\".\".concat(PREFIX, \"-media\"));\n        _a = easyCropRef.current.cropPixelsRef.current, cropWidth = _a.width, cropHeight = _a.height, cropX = _a.x, cropY = _a.y;\n\n        if (rotate && easyCropRef.current.rotateVal !== INIT_ROTATE) {\n          imgWidth = imgSource.naturalWidth, imgHeight = imgSource.naturalHeight;\n          angle = easyCropRef.current.rotateVal * (Math.PI / 180);\n          sine = Math.abs(Math.sin(angle));\n          cosine = Math.abs(Math.cos(angle));\n          squareWidth = imgWidth * cosine + imgHeight * sine;\n          squareHeight = imgHeight * cosine + imgWidth * sine;\n          canvas.width = squareWidth;\n          canvas.height = squareHeight;\n          ctx.fillStyle = fillColor;\n          ctx.fillRect(0, 0, squareWidth, squareHeight);\n          squareHalfWidth = squareWidth / 2;\n          squareHalfHeight = squareHeight / 2;\n          ctx.translate(squareHalfWidth, squareHalfHeight);\n          ctx.rotate(angle);\n          ctx.translate(-squareHalfWidth, -squareHalfHeight);\n          imgX = (squareWidth - imgWidth) / 2;\n          imgY = (squareHeight - imgHeight) / 2;\n          ctx.drawImage(imgSource, 0, 0, imgWidth, imgHeight, imgX, imgY, imgWidth, imgHeight);\n          imgData = ctx.getImageData(0, 0, squareWidth, squareHeight);\n          canvas.width = cropWidth;\n          canvas.height = cropHeight;\n          ctx.putImageData(imgData, -cropX, -cropY);\n        } else {\n          canvas.width = cropWidth;\n          canvas.height = cropHeight;\n          ctx.fillStyle = fillColor;\n          ctx.fillRect(0, 0, cropWidth, cropHeight);\n          ctx.drawImage(imgSource, cropX, cropY, cropWidth, cropHeight, 0, 0, cropWidth, cropHeight);\n        }\n\n        _b = fileRef.current, type = _b.type, name = _b.name, uid = _b.uid;\n        canvas.toBlob(function (blob) {\n          return __awaiter(void 0, void 0, void 0, function () {\n            var newFile, result;\n            return __generator(this, function (_a) {\n              switch (_a.label) {\n                case 0:\n                  newFile = Object.assign(new File([blob], name, {\n                    type: type\n                  }), {\n                    uid: uid\n                  });\n\n                  if (!beforeUploadRef.current) {\n                    return [2\n                    /*return*/\n                    , resolveRef.current(newFile)];\n                  }\n\n                  return [4\n                  /*yield*/\n                  , beforeUploadRef.current(newFile, [newFile])];\n\n                case 1:\n                  result = _a.sent();\n\n                  if (result === true) {\n                    return [2\n                    /*return*/\n                    , resolveRef.current(newFile)];\n                  }\n\n                  if (result === false) {\n                    return [2\n                    /*return*/\n                    , rejectRef.current(new Error('beforeUpload return false'))];\n                  }\n\n                  delete newFile[AntUpload.LIST_IGNORE];\n\n                  if (result === AntUpload.LIST_IGNORE) {\n                    Object.defineProperty(newFile, AntUpload.LIST_IGNORE, {\n                      value: true,\n                      configurable: true\n                    });\n                    return [2\n                    /*return*/\n                    , rejectRef.current(new Error('beforeUpload return LIST_IGNORE'))];\n                  }\n\n                  if (typeof result === 'object' && result !== null) {\n                    return [2\n                    /*return*/\n                    , resolveRef.current(result)];\n                  }\n\n                  return [2\n                  /*return*/\n                  ];\n              }\n            });\n          });\n        }, type, quality);\n        return [2\n        /*return*/\n        ];\n      });\n    });\n  }, [fillColor, quality, rotate]);\n\n  var getComponent = function (titleOfModal) {\n    return React.createElement(React.Fragment, null, uploadComponent, image && React.createElement(AntModal, __assign({\n      visible: true,\n      wrapClassName: \"\".concat(PREFIX, \"-modal\"),\n      title: titleOfModal,\n      onOk: onOk,\n      onCancel: onCancel,\n      maskClosable: false,\n      destroyOnClose: true\n    }, modalProps), React.createElement(EasyCrop$1, {\n      ref: easyCropRef,\n      cropperRef: ref,\n      image: image,\n      aspect: aspect,\n      shape: shape,\n      grid: grid,\n      zoom: zoom,\n      rotate: rotate,\n      minZoom: minZoom,\n      maxZoom: maxZoom,\n      cropperProps: cropperProps\n    })));\n  };\n\n  if (modalTitle) return getComponent(modalTitle);\n  return React.createElement(LocaleReceiver, null, function (locale, code) {\n    return getComponent(code === 'zh-cn' ? '编辑图片' : 'Edit image');\n  });\n});\nexport { ImgCrop as default };","map":{"version":3,"names":["__$styleInject","css","window","style","document","createElement","setAttribute","innerHTML","head","appendChild","React","forwardRef","useState","useRef","useCallback","useImperativeHandle","memo","useMemo","AntModal","AntUpload","LocaleReceiver","AntSlider","Cropper","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","PREFIX","INIT_ZOOM","ZOOM_STEP","INIT_ROTATE","ROTATE_STEP","MIN_ROTATE","MAX_ROTATE","EasyCrop","props","ref","cropperRef","image","aspect","shape","grid","zoom","rotate","minZoom","maxZoom","cropperProps","_a","x","crop","onCropChange","_b","width","height","cropSize","setCropSize","_c","zoomVal","setZoomVal","_d","rotateVal","setRotateVal","cropPixelsRef","onMediaLoaded","mediaSize","ratioWidth","onCropComplete","croppedArea","croppedAreaPixels","current","Fragment","cropShape","showGrid","zoomWithScroll","rotation","onZoomChange","onRotationChange","classes","containerClassName","concat","mediaClassName","className","onClick","disabled","min","max","onChange","EasyCrop$1","ImgCrop","quality","_e","fillColor","_f","_g","_h","_j","modalTitle","modalWidth","modalOk","modalCancel","modalMaskTransitionName","modalTransitionName","onModalOk","onModalCancel","beforeCrop","onUploadFail","children","cb","_k","setImage","fileRef","beforeUploadRef","resolveRef","rejectRef","uploadComponent","upload","Array","isArray","beforeUpload","accept","restUploadProps","file","fileList","shouldCrop","reader","newFile","uploadErr","FileReader","addEventListener","readAsDataURL","easyCropRef","modalProps","obj","okText","cancelText","maskTransitionName","transitionName","keys","forEach","key","onClose","onCancel","onOk","canvas","ctx","imgSource","cropWidth","cropHeight","cropX","cropY","imgWidth","imgHeight","angle","sine","cosine","squareWidth","squareHeight","squareHalfWidth","squareHalfHeight","imgX","imgY","imgData","type","name","uid","getContext","querySelector","naturalWidth","naturalHeight","Math","PI","abs","sin","cos","fillStyle","fillRect","translate","drawImage","getImageData","putImageData","toBlob","blob","File","Error","LIST_IGNORE","defineProperty","configurable","getComponent","titleOfModal","visible","wrapClassName","title","maskClosable","destroyOnClose","locale","code","default"],"sources":["E:/Work/PFE/Project folder/DocHelp-WA/node_modules/antd-img-crop/dist/antd-img-crop.esm.js"],"sourcesContent":["function __$styleInject(css) {\n    if (!css) return;\n\n    if (typeof window == 'undefined') return;\n    var style = document.createElement('style');\n    style.setAttribute('media', 'screen');\n\n    style.innerHTML = css;\n    document.head.appendChild(style);\n    return css;\n}\n\nimport React, { forwardRef, useState, useRef, useCallback, useImperativeHandle, memo, useMemo } from 'react';\nimport AntModal from 'antd/es/modal';\nimport AntUpload from 'antd/es/upload';\nimport LocaleReceiver from 'antd/es/locale-provider/LocaleReceiver';\nimport AntSlider from 'antd/es/slider';\nimport Cropper from 'react-easy-crop';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\nvar PREFIX = 'img-crop';\nvar INIT_ZOOM = 1;\nvar ZOOM_STEP = 0.1;\nvar INIT_ROTATE = 0;\nvar ROTATE_STEP = 1;\nvar MIN_ROTATE = -180;\nvar MAX_ROTATE = 180;\n\nvar EasyCrop = forwardRef(function (props, ref) {\n    var cropperRef = props.cropperRef, image = props.image, aspect = props.aspect, shape = props.shape, grid = props.grid, zoom = props.zoom, rotate = props.rotate, minZoom = props.minZoom, maxZoom = props.maxZoom, cropperProps = props.cropperProps;\n    var _a = useState({ x: 0, y: 0 }), crop = _a[0], onCropChange = _a[1];\n    var _b = useState({ width: 0, height: 0 }), cropSize = _b[0], setCropSize = _b[1];\n    var _c = useState(INIT_ZOOM), zoomVal = _c[0], setZoomVal = _c[1];\n    var _d = useState(INIT_ROTATE), rotateVal = _d[0], setRotateVal = _d[1];\n    var cropPixelsRef = useRef({ width: 0, height: 0, x: 0, y: 0 });\n    var onMediaLoaded = useCallback(function (mediaSize) {\n        var width = mediaSize.width, height = mediaSize.height;\n        var ratioWidth = height * aspect;\n        if (width > ratioWidth) {\n            setCropSize({ width: ratioWidth, height: height });\n        }\n        else {\n            setCropSize({ width: width, height: width / aspect });\n        }\n    }, [aspect]);\n    var onCropComplete = useCallback(function (croppedArea, croppedAreaPixels) {\n        cropPixelsRef.current = croppedAreaPixels;\n    }, []);\n    useImperativeHandle(ref, function () { return ({\n        rotateVal: rotateVal,\n        setZoomVal: setZoomVal,\n        setRotateVal: setRotateVal,\n        cropPixelsRef: cropPixelsRef\n    }); }, [rotateVal]);\n    return (React.createElement(React.Fragment, null,\n        React.createElement(Cropper, __assign({}, cropperProps, { ref: cropperRef, image: image, crop: crop, cropSize: cropSize, onCropChange: onCropChange, aspect: aspect, cropShape: shape, showGrid: grid, zoomWithScroll: zoom, zoom: zoomVal, rotation: rotateVal, onZoomChange: setZoomVal, onRotationChange: setRotateVal, minZoom: minZoom, maxZoom: maxZoom, onMediaLoaded: onMediaLoaded, onCropComplete: onCropComplete, classes: { containerClassName: \"\".concat(PREFIX, \"-container\"), mediaClassName: \"\".concat(PREFIX, \"-media\") } })),\n        zoom && (React.createElement(\"section\", { className: \"\".concat(PREFIX, \"-control \").concat(PREFIX, \"-control-zoom\") },\n            React.createElement(\"button\", { onClick: function () { return setZoomVal(zoomVal - ZOOM_STEP); }, disabled: zoomVal - ZOOM_STEP < minZoom }, \"\\uFF0D\"),\n            React.createElement(AntSlider, { min: minZoom, max: maxZoom, step: ZOOM_STEP, value: zoomVal, onChange: setZoomVal }),\n            React.createElement(\"button\", { onClick: function () { return setZoomVal(zoomVal + ZOOM_STEP); }, disabled: zoomVal + ZOOM_STEP > maxZoom }, \"\\uFF0B\"))),\n        rotate && (React.createElement(\"section\", { className: \"\".concat(PREFIX, \"-control \").concat(PREFIX, \"-control-rotate\") },\n            React.createElement(\"button\", { onClick: function () { return setRotateVal(rotateVal - ROTATE_STEP); }, disabled: rotateVal === MIN_ROTATE }, \"\\u21BA\"),\n            React.createElement(AntSlider, { min: MIN_ROTATE, max: MAX_ROTATE, step: ROTATE_STEP, value: rotateVal, onChange: setRotateVal }),\n            React.createElement(\"button\", { onClick: function () { return setRotateVal(rotateVal + ROTATE_STEP); }, disabled: rotateVal === MAX_ROTATE }, \"\\u21BB\")))));\n});\nvar EasyCrop$1 = memo(EasyCrop);\n\n__$styleInject(\".img-crop-modal .img-crop-container {\\n  position: relative;\\n  width: 100%;\\n  height: 40vh;\\n}\\n.img-crop-modal .img-crop-control {\\n  display: flex;\\n  align-items: center;\\n  width: 60%;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n.img-crop-modal .img-crop-control:first-of-type {\\n  margin-top: 16px;\\n}\\n.img-crop-modal .img-crop-control:last-of-type {\\n  margin-bottom: -8px;\\n}\\n.img-crop-modal .img-crop-control button {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  width: 34px;\\n  height: 34px;\\n  padding: 0;\\n  font-style: normal;\\n  background: transparent;\\n  border: 0;\\n  outline: 0;\\n  cursor: pointer;\\n}\\n.img-crop-modal .img-crop-control button[disabled] {\\n  cursor: default;\\n}\\n.img-crop-modal .img-crop-control button + div:only-of-type {\\n  flex: 1;\\n  margin: 0 8px;\\n}\\n.img-crop-modal .img-crop-control-zoom button {\\n  font-size: 18px;\\n}\\n.img-crop-modal .img-crop-control-rotate button {\\n  font-size: 16px;\\n}\\n.img-crop-modal .img-crop-control-rotate button:first-of-type {\\n  transform: rotate(-20deg);\\n}\\n.img-crop-modal .img-crop-control-rotate button:last-of-type {\\n  transform: rotate(20deg);\\n}\\n\");\n\nvar ImgCrop = forwardRef(function (props, ref) {\n    var _a = props.aspect, aspect = _a === void 0 ? 1 : _a, _b = props.shape, shape = _b === void 0 ? 'rect' : _b, _c = props.grid, grid = _c === void 0 ? false : _c, _d = props.quality, quality = _d === void 0 ? 0.4 : _d, _e = props.fillColor, fillColor = _e === void 0 ? 'white' : _e, _f = props.zoom, zoom = _f === void 0 ? true : _f, _g = props.rotate, rotate = _g === void 0 ? false : _g, _h = props.minZoom, minZoom = _h === void 0 ? 1 : _h, _j = props.maxZoom, maxZoom = _j === void 0 ? 3 : _j, modalTitle = props.modalTitle, modalWidth = props.modalWidth, modalOk = props.modalOk, modalCancel = props.modalCancel, modalMaskTransitionName = props.modalMaskTransitionName, modalTransitionName = props.modalTransitionName, onModalOk = props.onModalOk, onModalCancel = props.onModalCancel, beforeCrop = props.beforeCrop, onUploadFail = props.onUploadFail, cropperProps = props.cropperProps, children = props.children;\n    var cb = useRef({});\n    cb.current.onModalOk = onModalOk;\n    cb.current.onModalCancel = onModalCancel;\n    cb.current.beforeCrop = beforeCrop;\n    cb.current.onUploadFail = onUploadFail;\n    /**\n     * Upload\n     */\n    var _k = useState(''), image = _k[0], setImage = _k[1];\n    var fileRef = useRef();\n    var beforeUploadRef = useRef();\n    var resolveRef = useRef();\n    var rejectRef = useRef();\n    var uploadComponent = useMemo(function () {\n        var upload = Array.isArray(children) ? children[0] : children;\n        var _a = upload.props, beforeUpload = _a.beforeUpload, accept = _a.accept, restUploadProps = __rest(_a, [\"beforeUpload\", \"accept\"]);\n        beforeUploadRef.current = beforeUpload;\n        return __assign(__assign({}, upload), { props: __assign(__assign({}, restUploadProps), { accept: accept || 'image/*', beforeUpload: function (file, fileList) {\n                    return new Promise(function (resolve, reject) { return __awaiter(void 0, void 0, void 0, function () {\n                        var shouldCrop, reader;\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0:\n                                    if (!cb.current.beforeCrop) return [3 /*break*/, 2];\n                                    return [4 /*yield*/, cb.current.beforeCrop(file, fileList)];\n                                case 1:\n                                    shouldCrop = _a.sent();\n                                    if (!shouldCrop)\n                                        return [2 /*return*/, reject()];\n                                    _a.label = 2;\n                                case 2:\n                                    fileRef.current = file;\n                                    resolveRef.current = function (newFile) {\n                                        var _a, _b;\n                                        (_b = (_a = cb.current).onModalOk) === null || _b === void 0 ? void 0 : _b.call(_a, newFile);\n                                        resolve(newFile);\n                                    };\n                                    rejectRef.current = function (uploadErr) {\n                                        var _a, _b;\n                                        (_b = (_a = cb.current).onUploadFail) === null || _b === void 0 ? void 0 : _b.call(_a, uploadErr);\n                                        reject();\n                                    };\n                                    reader = new FileReader();\n                                    reader.addEventListener('load', function () {\n                                        if (typeof reader.result === 'string') {\n                                            setImage(reader.result);\n                                        }\n                                    });\n                                    reader.readAsDataURL(file);\n                                    return [2 /*return*/];\n                            }\n                        });\n                    }); });\n                } }) });\n    }, [children]);\n    /**\n     * Crop\n     */\n    var easyCropRef = useRef({});\n    /**\n     * Modal\n     */\n    var modalProps = useMemo(function () {\n        var obj = {\n            width: modalWidth,\n            okText: modalOk,\n            cancelText: modalCancel,\n            maskTransitionName: modalMaskTransitionName,\n            transitionName: modalTransitionName\n        };\n        Object.keys(obj).forEach(function (key) {\n            if (!obj[key])\n                delete obj[key];\n        });\n        return obj;\n    }, [modalCancel, modalMaskTransitionName, modalOk, modalTransitionName, modalWidth]);\n    var onClose = function () {\n        setImage('');\n        easyCropRef.current.setZoomVal(INIT_ZOOM);\n        easyCropRef.current.setRotateVal(INIT_ROTATE);\n    };\n    var onCancel = useCallback(function () {\n        var _a, _b;\n        (_b = (_a = cb.current).onModalCancel) === null || _b === void 0 ? void 0 : _b.call(_a);\n        onClose();\n    }, []);\n    var onOk = useCallback(function () { return __awaiter(void 0, void 0, void 0, function () {\n        var canvas, ctx, imgSource, _a, cropWidth, cropHeight, cropX, cropY, imgWidth, imgHeight, angle, sine, cosine, squareWidth, squareHeight, squareHalfWidth, squareHalfHeight, imgX, imgY, imgData, _b, type, name, uid;\n        return __generator(this, function (_c) {\n            onClose();\n            canvas = document.createElement('canvas');\n            ctx = canvas.getContext('2d');\n            imgSource = document.querySelector(\".\".concat(PREFIX, \"-media\"));\n            _a = easyCropRef.current.cropPixelsRef.current, cropWidth = _a.width, cropHeight = _a.height, cropX = _a.x, cropY = _a.y;\n            if (rotate && easyCropRef.current.rotateVal !== INIT_ROTATE) {\n                imgWidth = imgSource.naturalWidth, imgHeight = imgSource.naturalHeight;\n                angle = easyCropRef.current.rotateVal * (Math.PI / 180);\n                sine = Math.abs(Math.sin(angle));\n                cosine = Math.abs(Math.cos(angle));\n                squareWidth = imgWidth * cosine + imgHeight * sine;\n                squareHeight = imgHeight * cosine + imgWidth * sine;\n                canvas.width = squareWidth;\n                canvas.height = squareHeight;\n                ctx.fillStyle = fillColor;\n                ctx.fillRect(0, 0, squareWidth, squareHeight);\n                squareHalfWidth = squareWidth / 2;\n                squareHalfHeight = squareHeight / 2;\n                ctx.translate(squareHalfWidth, squareHalfHeight);\n                ctx.rotate(angle);\n                ctx.translate(-squareHalfWidth, -squareHalfHeight);\n                imgX = (squareWidth - imgWidth) / 2;\n                imgY = (squareHeight - imgHeight) / 2;\n                ctx.drawImage(imgSource, 0, 0, imgWidth, imgHeight, imgX, imgY, imgWidth, imgHeight);\n                imgData = ctx.getImageData(0, 0, squareWidth, squareHeight);\n                canvas.width = cropWidth;\n                canvas.height = cropHeight;\n                ctx.putImageData(imgData, -cropX, -cropY);\n            }\n            else {\n                canvas.width = cropWidth;\n                canvas.height = cropHeight;\n                ctx.fillStyle = fillColor;\n                ctx.fillRect(0, 0, cropWidth, cropHeight);\n                ctx.drawImage(imgSource, cropX, cropY, cropWidth, cropHeight, 0, 0, cropWidth, cropHeight);\n            }\n            _b = fileRef.current, type = _b.type, name = _b.name, uid = _b.uid;\n            canvas.toBlob(function (blob) { return __awaiter(void 0, void 0, void 0, function () {\n                var newFile, result;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            newFile = Object.assign(new File([blob], name, { type: type }), { uid: uid });\n                            if (!beforeUploadRef.current) {\n                                return [2 /*return*/, resolveRef.current(newFile)];\n                            }\n                            return [4 /*yield*/, beforeUploadRef.current(newFile, [newFile])];\n                        case 1:\n                            result = _a.sent();\n                            if (result === true) {\n                                return [2 /*return*/, resolveRef.current(newFile)];\n                            }\n                            if (result === false) {\n                                return [2 /*return*/, rejectRef.current(new Error('beforeUpload return false'))];\n                            }\n                            delete newFile[AntUpload.LIST_IGNORE];\n                            if (result === AntUpload.LIST_IGNORE) {\n                                Object.defineProperty(newFile, AntUpload.LIST_IGNORE, {\n                                    value: true,\n                                    configurable: true\n                                });\n                                return [2 /*return*/, rejectRef.current(new Error('beforeUpload return LIST_IGNORE'))];\n                            }\n                            if (typeof result === 'object' && result !== null) {\n                                return [2 /*return*/, resolveRef.current(result)];\n                            }\n                            return [2 /*return*/];\n                    }\n                });\n            }); }, type, quality);\n            return [2 /*return*/];\n        });\n    }); }, [fillColor, quality, rotate]);\n    var getComponent = function (titleOfModal) { return (React.createElement(React.Fragment, null,\n        uploadComponent,\n        image && (React.createElement(AntModal, __assign({ visible: true, wrapClassName: \"\".concat(PREFIX, \"-modal\"), title: titleOfModal, onOk: onOk, onCancel: onCancel, maskClosable: false, destroyOnClose: true }, modalProps),\n            React.createElement(EasyCrop$1, { ref: easyCropRef, cropperRef: ref, image: image, aspect: aspect, shape: shape, grid: grid, zoom: zoom, rotate: rotate, minZoom: minZoom, maxZoom: maxZoom, cropperProps: cropperProps }))))); };\n    if (modalTitle)\n        return getComponent(modalTitle);\n    return (React.createElement(LocaleReceiver, null, function (locale, code) { return getComponent(code === 'zh-cn' ? '编辑图片' : 'Edit image'); }));\n});\n\nexport { ImgCrop as default };\n"],"mappings":"AAAA,SAASA,cAAT,CAAwBC,GAAxB,EAA6B;EACzB,IAAI,CAACA,GAAL,EAAU;EAEV,IAAI,OAAOC,MAAP,IAAiB,WAArB,EAAkC;EAClC,IAAIC,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAZ;EACAF,KAAK,CAACG,YAAN,CAAmB,OAAnB,EAA4B,QAA5B;EAEAH,KAAK,CAACI,SAAN,GAAkBN,GAAlB;EACAG,QAAQ,CAACI,IAAT,CAAcC,WAAd,CAA0BN,KAA1B;EACA,OAAOF,GAAP;AACH;;AAED,OAAOS,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,MAAtC,EAA8CC,WAA9C,EAA2DC,mBAA3D,EAAgFC,IAAhF,EAAsFC,OAAtF,QAAqG,OAArG;AACA,OAAOC,QAAP,MAAqB,eAArB;AACA,OAAOC,SAAP,MAAsB,gBAAtB;AACA,OAAOC,cAAP,MAA2B,wCAA3B;AACA,OAAOC,SAAP,MAAsB,gBAAtB;AACA,OAAOC,OAAP,MAAoB,iBAApB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,QAAQ,GAAG,YAAW;EACtBA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,SAASF,QAAT,CAAkBG,CAAlB,EAAqB;IAC7C,KAAK,IAAIC,CAAJ,EAAOC,CAAC,GAAG,CAAX,EAAcC,CAAC,GAAGC,SAAS,CAACC,MAAjC,EAAyCH,CAAC,GAAGC,CAA7C,EAAgDD,CAAC,EAAjD,EAAqD;MACjDD,CAAC,GAAGG,SAAS,CAACF,CAAD,CAAb;;MACA,KAAK,IAAII,CAAT,IAAcL,CAAd,EAAiB,IAAIH,MAAM,CAACS,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCR,CAArC,EAAwCK,CAAxC,CAAJ,EAAgDN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;IACpE;;IACD,OAAON,CAAP;EACH,CAND;;EAOA,OAAOH,QAAQ,CAACa,KAAT,CAAe,IAAf,EAAqBN,SAArB,CAAP;AACH,CATD;;AAWA,SAASO,MAAT,CAAgBV,CAAhB,EAAmBW,CAAnB,EAAsB;EAClB,IAAIZ,CAAC,GAAG,EAAR;;EACA,KAAK,IAAIM,CAAT,IAAcL,CAAd,EAAiB,IAAIH,MAAM,CAACS,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCR,CAArC,EAAwCK,CAAxC,KAA8CM,CAAC,CAACC,OAAF,CAAUP,CAAV,IAAe,CAAjE,EACbN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;;EACJ,IAAIL,CAAC,IAAI,IAAL,IAAa,OAAOH,MAAM,CAACgB,qBAAd,KAAwC,UAAzD,EACI,KAAK,IAAIZ,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGR,MAAM,CAACgB,qBAAP,CAA6Bb,CAA7B,CAApB,EAAqDC,CAAC,GAAGI,CAAC,CAACD,MAA3D,EAAmEH,CAAC,EAApE,EAAwE;IACpE,IAAIU,CAAC,CAACC,OAAF,CAAUP,CAAC,CAACJ,CAAD,CAAX,IAAkB,CAAlB,IAAuBJ,MAAM,CAACS,SAAP,CAAiBQ,oBAAjB,CAAsCN,IAAtC,CAA2CR,CAA3C,EAA8CK,CAAC,CAACJ,CAAD,CAA/C,CAA3B,EACIF,CAAC,CAACM,CAAC,CAACJ,CAAD,CAAF,CAAD,GAAUD,CAAC,CAACK,CAAC,CAACJ,CAAD,CAAF,CAAX;EACP;EACL,OAAOF,CAAP;AACH;;AAED,SAASgB,SAAT,CAAmBC,OAAnB,EAA4BC,UAA5B,EAAwCC,CAAxC,EAA2CC,SAA3C,EAAsD;EAClD,SAASC,KAAT,CAAeC,KAAf,EAAsB;IAAE,OAAOA,KAAK,YAAYH,CAAjB,GAAqBG,KAArB,GAA6B,IAAIH,CAAJ,CAAM,UAAUI,OAAV,EAAmB;MAAEA,OAAO,CAACD,KAAD,CAAP;IAAiB,CAA5C,CAApC;EAAoF;;EAC5G,OAAO,KAAKH,CAAC,KAAKA,CAAC,GAAGK,OAAT,CAAN,EAAyB,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;IACvD,SAASC,SAAT,CAAmBJ,KAAnB,EAA0B;MAAE,IAAI;QAAEK,IAAI,CAACP,SAAS,CAACQ,IAAV,CAAeN,KAAf,CAAD,CAAJ;MAA8B,CAApC,CAAqC,OAAOV,CAAP,EAAU;QAAEa,MAAM,CAACb,CAAD,CAAN;MAAY;IAAE;;IAC3F,SAASiB,QAAT,CAAkBP,KAAlB,EAAyB;MAAE,IAAI;QAAEK,IAAI,CAACP,SAAS,CAAC,OAAD,CAAT,CAAmBE,KAAnB,CAAD,CAAJ;MAAkC,CAAxC,CAAyC,OAAOV,CAAP,EAAU;QAAEa,MAAM,CAACb,CAAD,CAAN;MAAY;IAAE;;IAC9F,SAASe,IAAT,CAAcG,MAAd,EAAsB;MAAEA,MAAM,CAACC,IAAP,GAAcR,OAAO,CAACO,MAAM,CAACR,KAAR,CAArB,GAAsCD,KAAK,CAACS,MAAM,CAACR,KAAR,CAAL,CAAoBU,IAApB,CAAyBN,SAAzB,EAAoCG,QAApC,CAAtC;IAAsF;;IAC9GF,IAAI,CAAC,CAACP,SAAS,GAAGA,SAAS,CAACV,KAAV,CAAgBO,OAAhB,EAAyBC,UAAU,IAAI,EAAvC,CAAb,EAAyDU,IAAzD,EAAD,CAAJ;EACH,CALM,CAAP;AAMH;;AAED,SAASK,WAAT,CAAqBhB,OAArB,EAA8BiB,IAA9B,EAAoC;EAChC,IAAIC,CAAC,GAAG;IAAEC,KAAK,EAAE,CAAT;IAAYC,IAAI,EAAE,YAAW;MAAE,IAAIrC,CAAC,CAAC,CAAD,CAAD,GAAO,CAAX,EAAc,MAAMA,CAAC,CAAC,CAAD,CAAP;MAAY,OAAOA,CAAC,CAAC,CAAD,CAAR;IAAc,CAAvE;IAAyEsC,IAAI,EAAE,EAA/E;IAAmFC,GAAG,EAAE;EAAxF,CAAR;EAAA,IAAsGC,CAAtG;EAAA,IAAyGC,CAAzG;EAAA,IAA4GzC,CAA5G;EAAA,IAA+G0C,CAA/G;EACA,OAAOA,CAAC,GAAG;IAAEd,IAAI,EAAEe,IAAI,CAAC,CAAD,CAAZ;IAAiB,SAASA,IAAI,CAAC,CAAD,CAA9B;IAAmC,UAAUA,IAAI,CAAC,CAAD;EAAjD,CAAJ,EAA4D,OAAOC,MAAP,KAAkB,UAAlB,KAAiCF,CAAC,CAACE,MAAM,CAACC,QAAR,CAAD,GAAqB,YAAW;IAAE,OAAO,IAAP;EAAc,CAAjF,CAA5D,EAAgJH,CAAvJ;;EACA,SAASC,IAAT,CAAcxC,CAAd,EAAiB;IAAE,OAAO,UAAU2C,CAAV,EAAa;MAAE,OAAOnB,IAAI,CAAC,CAACxB,CAAD,EAAI2C,CAAJ,CAAD,CAAX;IAAsB,CAA5C;EAA+C;;EAClE,SAASnB,IAAT,CAAcoB,EAAd,EAAkB;IACd,IAAIP,CAAJ,EAAO,MAAM,IAAIQ,SAAJ,CAAc,iCAAd,CAAN;;IACP,OAAOb,CAAP,EAAU,IAAI;MACV,IAAIK,CAAC,GAAG,CAAJ,EAAOC,CAAC,KAAKzC,CAAC,GAAG+C,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAR,GAAYN,CAAC,CAAC,QAAD,CAAb,GAA0BM,EAAE,CAAC,CAAD,CAAF,GAAQN,CAAC,CAAC,OAAD,CAAD,KAAe,CAACzC,CAAC,GAAGyC,CAAC,CAAC,QAAD,CAAN,KAAqBzC,CAAC,CAACS,IAAF,CAAOgC,CAAP,CAArB,EAAgC,CAA/C,CAAR,GAA4DA,CAAC,CAACb,IAAjG,CAAD,IAA2G,CAAC,CAAC5B,CAAC,GAAGA,CAAC,CAACS,IAAF,CAAOgC,CAAP,EAAUM,EAAE,CAAC,CAAD,CAAZ,CAAL,EAAuBhB,IAA9I,EAAoJ,OAAO/B,CAAP;MACpJ,IAAIyC,CAAC,GAAG,CAAJ,EAAOzC,CAAX,EAAc+C,EAAE,GAAG,CAACA,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAT,EAAY/C,CAAC,CAACsB,KAAd,CAAL;;MACd,QAAQyB,EAAE,CAAC,CAAD,CAAV;QACI,KAAK,CAAL;QAAQ,KAAK,CAAL;UAAQ/C,CAAC,GAAG+C,EAAJ;UAAQ;;QACxB,KAAK,CAAL;UAAQZ,CAAC,CAACC,KAAF;UAAW,OAAO;YAAEd,KAAK,EAAEyB,EAAE,CAAC,CAAD,CAAX;YAAgBhB,IAAI,EAAE;UAAtB,CAAP;;QACnB,KAAK,CAAL;UAAQI,CAAC,CAACC,KAAF;UAAWK,CAAC,GAAGM,EAAE,CAAC,CAAD,CAAN;UAAWA,EAAE,GAAG,CAAC,CAAD,CAAL;UAAU;;QACxC,KAAK,CAAL;UAAQA,EAAE,GAAGZ,CAAC,CAACI,GAAF,CAAMU,GAAN,EAAL;;UAAkBd,CAAC,CAACG,IAAF,CAAOW,GAAP;;UAAc;;QACxC;UACI,IAAI,EAAEjD,CAAC,GAAGmC,CAAC,CAACG,IAAN,EAAYtC,CAAC,GAAGA,CAAC,CAACK,MAAF,GAAW,CAAX,IAAgBL,CAAC,CAACA,CAAC,CAACK,MAAF,GAAW,CAAZ,CAAnC,MAAuD0C,EAAE,CAAC,CAAD,CAAF,KAAU,CAAV,IAAeA,EAAE,CAAC,CAAD,CAAF,KAAU,CAAhF,CAAJ,EAAwF;YAAEZ,CAAC,GAAG,CAAJ;YAAO;UAAW;;UAC5G,IAAIY,EAAE,CAAC,CAAD,CAAF,KAAU,CAAV,KAAgB,CAAC/C,CAAD,IAAO+C,EAAE,CAAC,CAAD,CAAF,GAAQ/C,CAAC,CAAC,CAAD,CAAT,IAAgB+C,EAAE,CAAC,CAAD,CAAF,GAAQ/C,CAAC,CAAC,CAAD,CAAhD,CAAJ,EAA2D;YAAEmC,CAAC,CAACC,KAAF,GAAUW,EAAE,CAAC,CAAD,CAAZ;YAAiB;UAAQ;;UACtF,IAAIA,EAAE,CAAC,CAAD,CAAF,KAAU,CAAV,IAAeZ,CAAC,CAACC,KAAF,GAAUpC,CAAC,CAAC,CAAD,CAA9B,EAAmC;YAAEmC,CAAC,CAACC,KAAF,GAAUpC,CAAC,CAAC,CAAD,CAAX;YAAgBA,CAAC,GAAG+C,EAAJ;YAAQ;UAAQ;;UACrE,IAAI/C,CAAC,IAAImC,CAAC,CAACC,KAAF,GAAUpC,CAAC,CAAC,CAAD,CAApB,EAAyB;YAAEmC,CAAC,CAACC,KAAF,GAAUpC,CAAC,CAAC,CAAD,CAAX;;YAAgBmC,CAAC,CAACI,GAAF,CAAMW,IAAN,CAAWH,EAAX;;YAAgB;UAAQ;;UACnE,IAAI/C,CAAC,CAAC,CAAD,CAAL,EAAUmC,CAAC,CAACI,GAAF,CAAMU,GAAN;;UACVd,CAAC,CAACG,IAAF,CAAOW,GAAP;;UAAc;MAXtB;;MAaAF,EAAE,GAAGb,IAAI,CAACzB,IAAL,CAAUQ,OAAV,EAAmBkB,CAAnB,CAAL;IACH,CAjBS,CAiBR,OAAOvB,CAAP,EAAU;MAAEmC,EAAE,GAAG,CAAC,CAAD,EAAInC,CAAJ,CAAL;MAAa6B,CAAC,GAAG,CAAJ;IAAQ,CAjBzB,SAiBkC;MAAED,CAAC,GAAGxC,CAAC,GAAG,CAAR;IAAY;;IAC1D,IAAI+C,EAAE,CAAC,CAAD,CAAF,GAAQ,CAAZ,EAAe,MAAMA,EAAE,CAAC,CAAD,CAAR;IAAa,OAAO;MAAEzB,KAAK,EAAEyB,EAAE,CAAC,CAAD,CAAF,GAAQA,EAAE,CAAC,CAAD,CAAV,GAAgB,KAAK,CAA9B;MAAiChB,IAAI,EAAE;IAAvC,CAAP;EAC/B;AACJ;;AAED,IAAIoB,MAAM,GAAG,UAAb;AACA,IAAIC,SAAS,GAAG,CAAhB;AACA,IAAIC,SAAS,GAAG,GAAhB;AACA,IAAIC,WAAW,GAAG,CAAlB;AACA,IAAIC,WAAW,GAAG,CAAlB;AACA,IAAIC,UAAU,GAAG,CAAC,GAAlB;AACA,IAAIC,UAAU,GAAG,GAAjB;AAEA,IAAIC,QAAQ,GAAGzE,UAAU,CAAC,UAAU0E,KAAV,EAAiBC,GAAjB,EAAsB;EAC5C,IAAIC,UAAU,GAAGF,KAAK,CAACE,UAAvB;EAAA,IAAmCC,KAAK,GAAGH,KAAK,CAACG,KAAjD;EAAA,IAAwDC,MAAM,GAAGJ,KAAK,CAACI,MAAvE;EAAA,IAA+EC,KAAK,GAAGL,KAAK,CAACK,KAA7F;EAAA,IAAoGC,IAAI,GAAGN,KAAK,CAACM,IAAjH;EAAA,IAAuHC,IAAI,GAAGP,KAAK,CAACO,IAApI;EAAA,IAA0IC,MAAM,GAAGR,KAAK,CAACQ,MAAzJ;EAAA,IAAiKC,OAAO,GAAGT,KAAK,CAACS,OAAjL;EAAA,IAA0LC,OAAO,GAAGV,KAAK,CAACU,OAA1M;EAAA,IAAmNC,YAAY,GAAGX,KAAK,CAACW,YAAxO;;EACA,IAAIC,EAAE,GAAGrF,QAAQ,CAAC;IAAEsF,CAAC,EAAE,CAAL;IAAQ/B,CAAC,EAAE;EAAX,CAAD,CAAjB;EAAA,IAAmCgC,IAAI,GAAGF,EAAE,CAAC,CAAD,CAA5C;EAAA,IAAiDG,YAAY,GAAGH,EAAE,CAAC,CAAD,CAAlE;;EACA,IAAII,EAAE,GAAGzF,QAAQ,CAAC;IAAE0F,KAAK,EAAE,CAAT;IAAYC,MAAM,EAAE;EAApB,CAAD,CAAjB;EAAA,IAA4CC,QAAQ,GAAGH,EAAE,CAAC,CAAD,CAAzD;EAAA,IAA8DI,WAAW,GAAGJ,EAAE,CAAC,CAAD,CAA9E;;EACA,IAAIK,EAAE,GAAG9F,QAAQ,CAACkE,SAAD,CAAjB;EAAA,IAA8B6B,OAAO,GAAGD,EAAE,CAAC,CAAD,CAA1C;EAAA,IAA+CE,UAAU,GAAGF,EAAE,CAAC,CAAD,CAA9D;;EACA,IAAIG,EAAE,GAAGjG,QAAQ,CAACoE,WAAD,CAAjB;EAAA,IAAgC8B,SAAS,GAAGD,EAAE,CAAC,CAAD,CAA9C;EAAA,IAAmDE,YAAY,GAAGF,EAAE,CAAC,CAAD,CAApE;;EACA,IAAIG,aAAa,GAAGnG,MAAM,CAAC;IAAEyF,KAAK,EAAE,CAAT;IAAYC,MAAM,EAAE,CAApB;IAAuBL,CAAC,EAAE,CAA1B;IAA6B/B,CAAC,EAAE;EAAhC,CAAD,CAA1B;EACA,IAAI8C,aAAa,GAAGnG,WAAW,CAAC,UAAUoG,SAAV,EAAqB;IACjD,IAAIZ,KAAK,GAAGY,SAAS,CAACZ,KAAtB;IAAA,IAA6BC,MAAM,GAAGW,SAAS,CAACX,MAAhD;IACA,IAAIY,UAAU,GAAGZ,MAAM,GAAGd,MAA1B;;IACA,IAAIa,KAAK,GAAGa,UAAZ,EAAwB;MACpBV,WAAW,CAAC;QAAEH,KAAK,EAAEa,UAAT;QAAqBZ,MAAM,EAAEA;MAA7B,CAAD,CAAX;IACH,CAFD,MAGK;MACDE,WAAW,CAAC;QAAEH,KAAK,EAAEA,KAAT;QAAgBC,MAAM,EAAED,KAAK,GAAGb;MAAhC,CAAD,CAAX;IACH;EACJ,CAT8B,EAS5B,CAACA,MAAD,CAT4B,CAA/B;EAUA,IAAI2B,cAAc,GAAGtG,WAAW,CAAC,UAAUuG,WAAV,EAAuBC,iBAAvB,EAA0C;IACvEN,aAAa,CAACO,OAAd,GAAwBD,iBAAxB;EACH,CAF+B,EAE7B,EAF6B,CAAhC;EAGAvG,mBAAmB,CAACuE,GAAD,EAAM,YAAY;IAAE,OAAQ;MAC3CwB,SAAS,EAAEA,SADgC;MAE3CF,UAAU,EAAEA,UAF+B;MAG3CG,YAAY,EAAEA,YAH6B;MAI3CC,aAAa,EAAEA;IAJ4B,CAAR;EAKlC,CALc,EAKZ,CAACF,SAAD,CALY,CAAnB;EAMA,OAAQpG,KAAK,CAACL,aAAN,CAAoBK,KAAK,CAAC8G,QAA1B,EAAoC,IAApC,EACJ9G,KAAK,CAACL,aAAN,CAAoBiB,OAApB,EAA6BC,QAAQ,CAAC,EAAD,EAAKyE,YAAL,EAAmB;IAAEV,GAAG,EAAEC,UAAP;IAAmBC,KAAK,EAAEA,KAA1B;IAAiCW,IAAI,EAAEA,IAAvC;IAA6CK,QAAQ,EAAEA,QAAvD;IAAiEJ,YAAY,EAAEA,YAA/E;IAA6FX,MAAM,EAAEA,MAArG;IAA6GgC,SAAS,EAAE/B,KAAxH;IAA+HgC,QAAQ,EAAE/B,IAAzI;IAA+IgC,cAAc,EAAE/B,IAA/J;IAAqKA,IAAI,EAAEe,OAA3K;IAAoLiB,QAAQ,EAAEd,SAA9L;IAAyMe,YAAY,EAAEjB,UAAvN;IAAmOkB,gBAAgB,EAAEf,YAArP;IAAmQjB,OAAO,EAAEA,OAA5Q;IAAqRC,OAAO,EAAEA,OAA9R;IAAuSkB,aAAa,EAAEA,aAAtT;IAAqUG,cAAc,EAAEA,cAArV;IAAqWW,OAAO,EAAE;MAAEC,kBAAkB,EAAE,GAAGC,MAAH,CAAUpD,MAAV,EAAkB,YAAlB,CAAtB;MAAuDqD,cAAc,EAAE,GAAGD,MAAH,CAAUpD,MAAV,EAAkB,QAAlB;IAAvE;EAA9W,CAAnB,CAArC,CADI,EAEJe,IAAI,IAAKlF,KAAK,CAACL,aAAN,CAAoB,SAApB,EAA+B;IAAE8H,SAAS,EAAE,GAAGF,MAAH,CAAUpD,MAAV,EAAkB,WAAlB,EAA+BoD,MAA/B,CAAsCpD,MAAtC,EAA8C,eAA9C;EAAb,CAA/B,EACLnE,KAAK,CAACL,aAAN,CAAoB,QAApB,EAA8B;IAAE+H,OAAO,EAAE,YAAY;MAAE,OAAOxB,UAAU,CAACD,OAAO,GAAG5B,SAAX,CAAjB;IAAyC,CAAlE;IAAoEsD,QAAQ,EAAE1B,OAAO,GAAG5B,SAAV,GAAsBe;EAApG,CAA9B,EAA6I,QAA7I,CADK,EAELpF,KAAK,CAACL,aAAN,CAAoBgB,SAApB,EAA+B;IAAEiH,GAAG,EAAExC,OAAP;IAAgByC,GAAG,EAAExC,OAArB;IAA8B1C,IAAI,EAAE0B,SAApC;IAA+C/B,KAAK,EAAE2D,OAAtD;IAA+D6B,QAAQ,EAAE5B;EAAzE,CAA/B,CAFK,EAGLlG,KAAK,CAACL,aAAN,CAAoB,QAApB,EAA8B;IAAE+H,OAAO,EAAE,YAAY;MAAE,OAAOxB,UAAU,CAACD,OAAO,GAAG5B,SAAX,CAAjB;IAAyC,CAAlE;IAAoEsD,QAAQ,EAAE1B,OAAO,GAAG5B,SAAV,GAAsBgB;EAApG,CAA9B,EAA6I,QAA7I,CAHK,CAFL,EAMJF,MAAM,IAAKnF,KAAK,CAACL,aAAN,CAAoB,SAApB,EAA+B;IAAE8H,SAAS,EAAE,GAAGF,MAAH,CAAUpD,MAAV,EAAkB,WAAlB,EAA+BoD,MAA/B,CAAsCpD,MAAtC,EAA8C,iBAA9C;EAAb,CAA/B,EACPnE,KAAK,CAACL,aAAN,CAAoB,QAApB,EAA8B;IAAE+H,OAAO,EAAE,YAAY;MAAE,OAAOrB,YAAY,CAACD,SAAS,GAAG7B,WAAb,CAAnB;IAA+C,CAAxE;IAA0EoD,QAAQ,EAAEvB,SAAS,KAAK5B;EAAlG,CAA9B,EAA8I,QAA9I,CADO,EAEPxE,KAAK,CAACL,aAAN,CAAoBgB,SAApB,EAA+B;IAAEiH,GAAG,EAAEpD,UAAP;IAAmBqD,GAAG,EAAEpD,UAAxB;IAAoC9B,IAAI,EAAE4B,WAA1C;IAAuDjC,KAAK,EAAE8D,SAA9D;IAAyE0B,QAAQ,EAAEzB;EAAnF,CAA/B,CAFO,EAGPrG,KAAK,CAACL,aAAN,CAAoB,QAApB,EAA8B;IAAE+H,OAAO,EAAE,YAAY;MAAE,OAAOrB,YAAY,CAACD,SAAS,GAAG7B,WAAb,CAAnB;IAA+C,CAAxE;IAA0EoD,QAAQ,EAAEvB,SAAS,KAAK3B;EAAlG,CAA9B,EAA8I,QAA9I,CAHO,CANP,CAAR;AAUH,CApCwB,CAAzB;AAqCA,IAAIsD,UAAU,GAAGzH,IAAI,CAACoE,QAAD,CAArB;;AAEApF,cAAc,CAAC,opCAAD,CAAd;;AAEA,IAAI0I,OAAO,GAAG/H,UAAU,CAAC,UAAU0E,KAAV,EAAiBC,GAAjB,EAAsB;EAC3C,IAAIW,EAAE,GAAGZ,KAAK,CAACI,MAAf;EAAA,IAAuBA,MAAM,GAAGQ,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAApD;EAAA,IAAwDI,EAAE,GAAGhB,KAAK,CAACK,KAAnE;EAAA,IAA0EA,KAAK,GAAGW,EAAE,KAAK,KAAK,CAAZ,GAAgB,MAAhB,GAAyBA,EAA3G;EAAA,IAA+GK,EAAE,GAAGrB,KAAK,CAACM,IAA1H;EAAA,IAAgIA,IAAI,GAAGe,EAAE,KAAK,KAAK,CAAZ,GAAgB,KAAhB,GAAwBA,EAA/J;EAAA,IAAmKG,EAAE,GAAGxB,KAAK,CAACsD,OAA9K;EAAA,IAAuLA,OAAO,GAAG9B,EAAE,KAAK,KAAK,CAAZ,GAAgB,GAAhB,GAAsBA,EAAvN;EAAA,IAA2N+B,EAAE,GAAGvD,KAAK,CAACwD,SAAtO;EAAA,IAAiPA,SAAS,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,OAAhB,GAA0BA,EAAvR;EAAA,IAA2RE,EAAE,GAAGzD,KAAK,CAACO,IAAtS;EAAA,IAA4SA,IAAI,GAAGkD,EAAE,KAAK,KAAK,CAAZ,GAAgB,IAAhB,GAAuBA,EAA1U;EAAA,IAA8UC,EAAE,GAAG1D,KAAK,CAACQ,MAAzV;EAAA,IAAiWA,MAAM,GAAGkD,EAAE,KAAK,KAAK,CAAZ,GAAgB,KAAhB,GAAwBA,EAAlY;EAAA,IAAsYC,EAAE,GAAG3D,KAAK,CAACS,OAAjZ;EAAA,IAA0ZA,OAAO,GAAGkD,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAAxb;EAAA,IAA4bC,EAAE,GAAG5D,KAAK,CAACU,OAAvc;EAAA,IAAgdA,OAAO,GAAGkD,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAA9e;EAAA,IAAkfC,UAAU,GAAG7D,KAAK,CAAC6D,UAArgB;EAAA,IAAihBC,UAAU,GAAG9D,KAAK,CAAC8D,UAApiB;EAAA,IAAgjBC,OAAO,GAAG/D,KAAK,CAAC+D,OAAhkB;EAAA,IAAykBC,WAAW,GAAGhE,KAAK,CAACgE,WAA7lB;EAAA,IAA0mBC,uBAAuB,GAAGjE,KAAK,CAACiE,uBAA1oB;EAAA,IAAmqBC,mBAAmB,GAAGlE,KAAK,CAACkE,mBAA/rB;EAAA,IAAotBC,SAAS,GAAGnE,KAAK,CAACmE,SAAtuB;EAAA,IAAivBC,aAAa,GAAGpE,KAAK,CAACoE,aAAvwB;EAAA,IAAsxBC,UAAU,GAAGrE,KAAK,CAACqE,UAAzyB;EAAA,IAAqzBC,YAAY,GAAGtE,KAAK,CAACsE,YAA10B;EAAA,IAAw1B3D,YAAY,GAAGX,KAAK,CAACW,YAA72B;EAAA,IAA23B4D,QAAQ,GAAGvE,KAAK,CAACuE,QAA54B;EACA,IAAIC,EAAE,GAAGhJ,MAAM,CAAC,EAAD,CAAf;EACAgJ,EAAE,CAACtC,OAAH,CAAWiC,SAAX,GAAuBA,SAAvB;EACAK,EAAE,CAACtC,OAAH,CAAWkC,aAAX,GAA2BA,aAA3B;EACAI,EAAE,CAACtC,OAAH,CAAWmC,UAAX,GAAwBA,UAAxB;EACAG,EAAE,CAACtC,OAAH,CAAWoC,YAAX,GAA0BA,YAA1B;EACA;AACJ;AACA;;EACI,IAAIG,EAAE,GAAGlJ,QAAQ,CAAC,EAAD,CAAjB;EAAA,IAAuB4E,KAAK,GAAGsE,EAAE,CAAC,CAAD,CAAjC;EAAA,IAAsCC,QAAQ,GAAGD,EAAE,CAAC,CAAD,CAAnD;;EACA,IAAIE,OAAO,GAAGnJ,MAAM,EAApB;EACA,IAAIoJ,eAAe,GAAGpJ,MAAM,EAA5B;EACA,IAAIqJ,UAAU,GAAGrJ,MAAM,EAAvB;EACA,IAAIsJ,SAAS,GAAGtJ,MAAM,EAAtB;EACA,IAAIuJ,eAAe,GAAGnJ,OAAO,CAAC,YAAY;IACtC,IAAIoJ,MAAM,GAAGC,KAAK,CAACC,OAAN,CAAcX,QAAd,IAA0BA,QAAQ,CAAC,CAAD,CAAlC,GAAwCA,QAArD;;IACA,IAAI3D,EAAE,GAAGoE,MAAM,CAAChF,KAAhB;IAAA,IAAuBmF,YAAY,GAAGvE,EAAE,CAACuE,YAAzC;IAAA,IAAuDC,MAAM,GAAGxE,EAAE,CAACwE,MAAnE;IAAA,IAA2EC,eAAe,GAAGrI,MAAM,CAAC4D,EAAD,EAAK,CAAC,cAAD,EAAiB,QAAjB,CAAL,CAAnG;;IACAgE,eAAe,CAAC1C,OAAhB,GAA0BiD,YAA1B;IACA,OAAOjJ,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAK8I,MAAL,CAAT,EAAuB;MAAEhF,KAAK,EAAE9D,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKmJ,eAAL,CAAT,EAAgC;QAAED,MAAM,EAAEA,MAAM,IAAI,SAApB;QAA+BD,YAAY,EAAE,UAAUG,IAAV,EAAgBC,QAAhB,EAA0B;UAClJ,OAAO,IAAI1H,OAAJ,CAAY,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;YAAE,OAAOT,SAAS,CAAC,KAAK,CAAN,EAAS,KAAK,CAAd,EAAiB,KAAK,CAAtB,EAAyB,YAAY;cACjG,IAAImI,UAAJ,EAAgBC,MAAhB;cACA,OAAOnH,WAAW,CAAC,IAAD,EAAO,UAAUsC,EAAV,EAAc;gBACnC,QAAQA,EAAE,CAACnC,KAAX;kBACI,KAAK,CAAL;oBACI,IAAI,CAAC+F,EAAE,CAACtC,OAAH,CAAWmC,UAAhB,EAA4B,OAAO,CAAC;oBAAE;oBAAH,EAAc,CAAd,CAAP;oBAC5B,OAAO,CAAC;oBAAE;oBAAH,EAAcG,EAAE,CAACtC,OAAH,CAAWmC,UAAX,CAAsBiB,IAAtB,EAA4BC,QAA5B,CAAd,CAAP;;kBACJ,KAAK,CAAL;oBACIC,UAAU,GAAG5E,EAAE,CAAClC,IAAH,EAAb;oBACA,IAAI,CAAC8G,UAAL,EACI,OAAO,CAAC;oBAAE;oBAAH,EAAe1H,MAAM,EAArB,CAAP;oBACJ8C,EAAE,CAACnC,KAAH,GAAW,CAAX;;kBACJ,KAAK,CAAL;oBACIkG,OAAO,CAACzC,OAAR,GAAkBoD,IAAlB;;oBACAT,UAAU,CAAC3C,OAAX,GAAqB,UAAUwD,OAAV,EAAmB;sBACpC,IAAI9E,EAAJ,EAAQI,EAAR;;sBACA,CAACA,EAAE,GAAG,CAACJ,EAAE,GAAG4D,EAAE,CAACtC,OAAT,EAAkBiC,SAAxB,MAAuC,IAAvC,IAA+CnD,EAAE,KAAK,KAAK,CAA3D,GAA+D,KAAK,CAApE,GAAwEA,EAAE,CAAClE,IAAH,CAAQ8D,EAAR,EAAY8E,OAAZ,CAAxE;sBACA9H,OAAO,CAAC8H,OAAD,CAAP;oBACH,CAJD;;oBAKAZ,SAAS,CAAC5C,OAAV,GAAoB,UAAUyD,SAAV,EAAqB;sBACrC,IAAI/E,EAAJ,EAAQI,EAAR;;sBACA,CAACA,EAAE,GAAG,CAACJ,EAAE,GAAG4D,EAAE,CAACtC,OAAT,EAAkBoC,YAAxB,MAA0C,IAA1C,IAAkDtD,EAAE,KAAK,KAAK,CAA9D,GAAkE,KAAK,CAAvE,GAA2EA,EAAE,CAAClE,IAAH,CAAQ8D,EAAR,EAAY+E,SAAZ,CAA3E;sBACA7H,MAAM;oBACT,CAJD;;oBAKA2H,MAAM,GAAG,IAAIG,UAAJ,EAAT;oBACAH,MAAM,CAACI,gBAAP,CAAwB,MAAxB,EAAgC,YAAY;sBACxC,IAAI,OAAOJ,MAAM,CAACtH,MAAd,KAAyB,QAA7B,EAAuC;wBACnCuG,QAAQ,CAACe,MAAM,CAACtH,MAAR,CAAR;sBACH;oBACJ,CAJD;oBAKAsH,MAAM,CAACK,aAAP,CAAqBR,IAArB;oBACA,OAAO,CAAC;oBAAE;oBAAH,CAAP;gBA5BR;cA8BH,CA/BiB,CAAlB;YAgCH,CAlC+D,CAAhB;UAkC3C,CAlCE,CAAP;QAmCH;MApC8E,CAAhC;IAAjB,CAAvB,CAAf;EAqCH,CAzC4B,EAyC1B,CAACf,QAAD,CAzC0B,CAA7B;EA0CA;AACJ;AACA;;EACI,IAAIwB,WAAW,GAAGvK,MAAM,CAAC,EAAD,CAAxB;EACA;AACJ;AACA;;EACI,IAAIwK,UAAU,GAAGpK,OAAO,CAAC,YAAY;IACjC,IAAIqK,GAAG,GAAG;MACNhF,KAAK,EAAE6C,UADD;MAENoC,MAAM,EAAEnC,OAFF;MAGNoC,UAAU,EAAEnC,WAHN;MAINoC,kBAAkB,EAAEnC,uBAJd;MAKNoC,cAAc,EAAEnC;IALV,CAAV;IAOA/H,MAAM,CAACmK,IAAP,CAAYL,GAAZ,EAAiBM,OAAjB,CAAyB,UAAUC,GAAV,EAAe;MACpC,IAAI,CAACP,GAAG,CAACO,GAAD,CAAR,EACI,OAAOP,GAAG,CAACO,GAAD,CAAV;IACP,CAHD;IAIA,OAAOP,GAAP;EACH,CAbuB,EAarB,CAACjC,WAAD,EAAcC,uBAAd,EAAuCF,OAAvC,EAAgDG,mBAAhD,EAAqEJ,UAArE,CAbqB,CAAxB;;EAcA,IAAI2C,OAAO,GAAG,YAAY;IACtB/B,QAAQ,CAAC,EAAD,CAAR;IACAqB,WAAW,CAAC7D,OAAZ,CAAoBX,UAApB,CAA+B9B,SAA/B;IACAsG,WAAW,CAAC7D,OAAZ,CAAoBR,YAApB,CAAiC/B,WAAjC;EACH,CAJD;;EAKA,IAAI+G,QAAQ,GAAGjL,WAAW,CAAC,YAAY;IACnC,IAAImF,EAAJ,EAAQI,EAAR;;IACA,CAACA,EAAE,GAAG,CAACJ,EAAE,GAAG4D,EAAE,CAACtC,OAAT,EAAkBkC,aAAxB,MAA2C,IAA3C,IAAmDpD,EAAE,KAAK,KAAK,CAA/D,GAAmE,KAAK,CAAxE,GAA4EA,EAAE,CAAClE,IAAH,CAAQ8D,EAAR,CAA5E;IACA6F,OAAO;EACV,CAJyB,EAIvB,EAJuB,CAA1B;EAKA,IAAIE,IAAI,GAAGlL,WAAW,CAAC,YAAY;IAAE,OAAO4B,SAAS,CAAC,KAAK,CAAN,EAAS,KAAK,CAAd,EAAiB,KAAK,CAAtB,EAAyB,YAAY;MACtF,IAAIuJ,MAAJ,EAAYC,GAAZ,EAAiBC,SAAjB,EAA4BlG,EAA5B,EAAgCmG,SAAhC,EAA2CC,UAA3C,EAAuDC,KAAvD,EAA8DC,KAA9D,EAAqEC,QAArE,EAA+EC,SAA/E,EAA0FC,KAA1F,EAAiGC,IAAjG,EAAuGC,MAAvG,EAA+GC,WAA/G,EAA4HC,YAA5H,EAA0IC,eAA1I,EAA2JC,gBAA3J,EAA6KC,IAA7K,EAAmLC,IAAnL,EAAyLC,OAAzL,EAAkM9G,EAAlM,EAAsM+G,IAAtM,EAA4MC,IAA5M,EAAkNC,GAAlN;;MACA,OAAO3J,WAAW,CAAC,IAAD,EAAO,UAAU+C,EAAV,EAAc;QACnCoF,OAAO;QACPG,MAAM,GAAG7L,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAT;QACA6L,GAAG,GAAGD,MAAM,CAACsB,UAAP,CAAkB,IAAlB,CAAN;QACApB,SAAS,GAAG/L,QAAQ,CAACoN,aAAT,CAAuB,IAAIvF,MAAJ,CAAWpD,MAAX,EAAmB,QAAnB,CAAvB,CAAZ;QACAoB,EAAE,GAAGmF,WAAW,CAAC7D,OAAZ,CAAoBP,aAApB,CAAkCO,OAAvC,EAAgD6E,SAAS,GAAGnG,EAAE,CAACK,KAA/D,EAAsE+F,UAAU,GAAGpG,EAAE,CAACM,MAAtF,EAA8F+F,KAAK,GAAGrG,EAAE,CAACC,CAAzG,EAA4GqG,KAAK,GAAGtG,EAAE,CAAC9B,CAAvH;;QACA,IAAI0B,MAAM,IAAIuF,WAAW,CAAC7D,OAAZ,CAAoBT,SAApB,KAAkC9B,WAAhD,EAA6D;UACzDwH,QAAQ,GAAGL,SAAS,CAACsB,YAArB,EAAmChB,SAAS,GAAGN,SAAS,CAACuB,aAAzD;UACAhB,KAAK,GAAGtB,WAAW,CAAC7D,OAAZ,CAAoBT,SAApB,IAAiC6G,IAAI,CAACC,EAAL,GAAU,GAA3C,CAAR;UACAjB,IAAI,GAAGgB,IAAI,CAACE,GAAL,CAASF,IAAI,CAACG,GAAL,CAASpB,KAAT,CAAT,CAAP;UACAE,MAAM,GAAGe,IAAI,CAACE,GAAL,CAASF,IAAI,CAACI,GAAL,CAASrB,KAAT,CAAT,CAAT;UACAG,WAAW,GAAGL,QAAQ,GAAGI,MAAX,GAAoBH,SAAS,GAAGE,IAA9C;UACAG,YAAY,GAAGL,SAAS,GAAGG,MAAZ,GAAqBJ,QAAQ,GAAGG,IAA/C;UACAV,MAAM,CAAC3F,KAAP,GAAeuG,WAAf;UACAZ,MAAM,CAAC1F,MAAP,GAAgBuG,YAAhB;UACAZ,GAAG,CAAC8B,SAAJ,GAAgBnF,SAAhB;UACAqD,GAAG,CAAC+B,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBpB,WAAnB,EAAgCC,YAAhC;UACAC,eAAe,GAAGF,WAAW,GAAG,CAAhC;UACAG,gBAAgB,GAAGF,YAAY,GAAG,CAAlC;UACAZ,GAAG,CAACgC,SAAJ,CAAcnB,eAAd,EAA+BC,gBAA/B;UACAd,GAAG,CAACrG,MAAJ,CAAW6G,KAAX;UACAR,GAAG,CAACgC,SAAJ,CAAc,CAACnB,eAAf,EAAgC,CAACC,gBAAjC;UACAC,IAAI,GAAG,CAACJ,WAAW,GAAGL,QAAf,IAA2B,CAAlC;UACAU,IAAI,GAAG,CAACJ,YAAY,GAAGL,SAAhB,IAA6B,CAApC;UACAP,GAAG,CAACiC,SAAJ,CAAchC,SAAd,EAAyB,CAAzB,EAA4B,CAA5B,EAA+BK,QAA/B,EAAyCC,SAAzC,EAAoDQ,IAApD,EAA0DC,IAA1D,EAAgEV,QAAhE,EAA0EC,SAA1E;UACAU,OAAO,GAAGjB,GAAG,CAACkC,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuBvB,WAAvB,EAAoCC,YAApC,CAAV;UACAb,MAAM,CAAC3F,KAAP,GAAe8F,SAAf;UACAH,MAAM,CAAC1F,MAAP,GAAgB8F,UAAhB;UACAH,GAAG,CAACmC,YAAJ,CAAiBlB,OAAjB,EAA0B,CAACb,KAA3B,EAAkC,CAACC,KAAnC;QACH,CAvBD,MAwBK;UACDN,MAAM,CAAC3F,KAAP,GAAe8F,SAAf;UACAH,MAAM,CAAC1F,MAAP,GAAgB8F,UAAhB;UACAH,GAAG,CAAC8B,SAAJ,GAAgBnF,SAAhB;UACAqD,GAAG,CAAC+B,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB7B,SAAnB,EAA8BC,UAA9B;UACAH,GAAG,CAACiC,SAAJ,CAAchC,SAAd,EAAyBG,KAAzB,EAAgCC,KAAhC,EAAuCH,SAAvC,EAAkDC,UAAlD,EAA8D,CAA9D,EAAiE,CAAjE,EAAoED,SAApE,EAA+EC,UAA/E;QACH;;QACDhG,EAAE,GAAG2D,OAAO,CAACzC,OAAb,EAAsB6F,IAAI,GAAG/G,EAAE,CAAC+G,IAAhC,EAAsCC,IAAI,GAAGhH,EAAE,CAACgH,IAAhD,EAAsDC,GAAG,GAAGjH,EAAE,CAACiH,GAA/D;QACArB,MAAM,CAACqC,MAAP,CAAc,UAAUC,IAAV,EAAgB;UAAE,OAAO7L,SAAS,CAAC,KAAK,CAAN,EAAS,KAAK,CAAd,EAAiB,KAAK,CAAtB,EAAyB,YAAY;YACjF,IAAIqI,OAAJ,EAAavH,MAAb;YACA,OAAOG,WAAW,CAAC,IAAD,EAAO,UAAUsC,EAAV,EAAc;cACnC,QAAQA,EAAE,CAACnC,KAAX;gBACI,KAAK,CAAL;kBACIiH,OAAO,GAAGvJ,MAAM,CAACC,MAAP,CAAc,IAAI+M,IAAJ,CAAS,CAACD,IAAD,CAAT,EAAiBlB,IAAjB,EAAuB;oBAAED,IAAI,EAAEA;kBAAR,CAAvB,CAAd,EAAsD;oBAAEE,GAAG,EAAEA;kBAAP,CAAtD,CAAV;;kBACA,IAAI,CAACrD,eAAe,CAAC1C,OAArB,EAA8B;oBAC1B,OAAO,CAAC;oBAAE;oBAAH,EAAe2C,UAAU,CAAC3C,OAAX,CAAmBwD,OAAnB,CAAf,CAAP;kBACH;;kBACD,OAAO,CAAC;kBAAE;kBAAH,EAAcd,eAAe,CAAC1C,OAAhB,CAAwBwD,OAAxB,EAAiC,CAACA,OAAD,CAAjC,CAAd,CAAP;;gBACJ,KAAK,CAAL;kBACIvH,MAAM,GAAGyC,EAAE,CAAClC,IAAH,EAAT;;kBACA,IAAIP,MAAM,KAAK,IAAf,EAAqB;oBACjB,OAAO,CAAC;oBAAE;oBAAH,EAAe0G,UAAU,CAAC3C,OAAX,CAAmBwD,OAAnB,CAAf,CAAP;kBACH;;kBACD,IAAIvH,MAAM,KAAK,KAAf,EAAsB;oBAClB,OAAO,CAAC;oBAAE;oBAAH,EAAe2G,SAAS,CAAC5C,OAAV,CAAkB,IAAIkH,KAAJ,CAAU,2BAAV,CAAlB,CAAf,CAAP;kBACH;;kBACD,OAAO1D,OAAO,CAAC5J,SAAS,CAACuN,WAAX,CAAd;;kBACA,IAAIlL,MAAM,KAAKrC,SAAS,CAACuN,WAAzB,EAAsC;oBAClClN,MAAM,CAACmN,cAAP,CAAsB5D,OAAtB,EAA+B5J,SAAS,CAACuN,WAAzC,EAAsD;sBAClD1L,KAAK,EAAE,IAD2C;sBAElD4L,YAAY,EAAE;oBAFoC,CAAtD;oBAIA,OAAO,CAAC;oBAAE;oBAAH,EAAezE,SAAS,CAAC5C,OAAV,CAAkB,IAAIkH,KAAJ,CAAU,iCAAV,CAAlB,CAAf,CAAP;kBACH;;kBACD,IAAI,OAAOjL,MAAP,KAAkB,QAAlB,IAA8BA,MAAM,KAAK,IAA7C,EAAmD;oBAC/C,OAAO,CAAC;oBAAE;oBAAH,EAAe0G,UAAU,CAAC3C,OAAX,CAAmB/D,MAAnB,CAAf,CAAP;kBACH;;kBACD,OAAO,CAAC;kBAAE;kBAAH,CAAP;cA1BR;YA4BH,CA7BiB,CAAlB;UA8BH,CAhC+C,CAAhB;QAgC3B,CAhCL,EAgCO4J,IAhCP,EAgCazE,OAhCb;QAiCA,OAAO,CAAC;QAAE;QAAH,CAAP;MACH,CAxEiB,CAAlB;IAyEH,CA3EoD,CAAhB;EA2EhC,CA3EiB,EA2Ef,CAACE,SAAD,EAAYF,OAAZ,EAAqB9C,MAArB,CA3Ee,CAAtB;;EA4EA,IAAIgJ,YAAY,GAAG,UAAUC,YAAV,EAAwB;IAAE,OAAQpO,KAAK,CAACL,aAAN,CAAoBK,KAAK,CAAC8G,QAA1B,EAAoC,IAApC,EACjD4C,eADiD,EAEjD5E,KAAK,IAAK9E,KAAK,CAACL,aAAN,CAAoBa,QAApB,EAA8BK,QAAQ,CAAC;MAAEwN,OAAO,EAAE,IAAX;MAAiBC,aAAa,EAAE,GAAG/G,MAAH,CAAUpD,MAAV,EAAkB,QAAlB,CAAhC;MAA6DoK,KAAK,EAAEH,YAApE;MAAkF9C,IAAI,EAAEA,IAAxF;MAA8FD,QAAQ,EAAEA,QAAxG;MAAkHmD,YAAY,EAAE,KAAhI;MAAuIC,cAAc,EAAE;IAAvJ,CAAD,EAAgK9D,UAAhK,CAAtC,EACN3K,KAAK,CAACL,aAAN,CAAoBoI,UAApB,EAAgC;MAAEnD,GAAG,EAAE8F,WAAP;MAAoB7F,UAAU,EAAED,GAAhC;MAAqCE,KAAK,EAAEA,KAA5C;MAAmDC,MAAM,EAAEA,MAA3D;MAAmEC,KAAK,EAAEA,KAA1E;MAAiFC,IAAI,EAAEA,IAAvF;MAA6FC,IAAI,EAAEA,IAAnG;MAAyGC,MAAM,EAAEA,MAAjH;MAAyHC,OAAO,EAAEA,OAAlI;MAA2IC,OAAO,EAAEA,OAApJ;MAA6JC,YAAY,EAAEA;IAA3K,CAAhC,CADM,CAFuC,CAAR;EAG4L,CAHzO;;EAIA,IAAIkD,UAAJ,EACI,OAAO2F,YAAY,CAAC3F,UAAD,CAAnB;EACJ,OAAQxI,KAAK,CAACL,aAAN,CAAoBe,cAApB,EAAoC,IAApC,EAA0C,UAAUgO,MAAV,EAAkBC,IAAlB,EAAwB;IAAE,OAAOR,YAAY,CAACQ,IAAI,KAAK,OAAT,GAAmB,MAAnB,GAA4B,YAA7B,CAAnB;EAAgE,CAApI,CAAR;AACH,CA3KuB,CAAxB;AA6KA,SAAS3G,OAAO,IAAI4G,OAApB"},"metadata":{},"sourceType":"module"}