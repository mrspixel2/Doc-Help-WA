{"ast":null,"code":"import { invariant } from 'hey-listen';\nvar prevTime = 0;\nvar onNextFrame = typeof window !== 'undefined' && window.requestAnimationFrame !== undefined ? function (callback) {\n  return window.requestAnimationFrame(callback);\n} : function (callback) {\n  var timestamp = Date.now();\n  var timeToCall = Math.max(0, 16.7 - (timestamp - prevTime));\n  prevTime = timestamp + timeToCall;\n  setTimeout(function () {\n    return callback(prevTime);\n  }, timeToCall);\n};\n\nvar createStep = function (setRunNextFrame) {\n  var processToRun = [];\n  var processToRunNextFrame = [];\n  var numThisFrame = 0;\n  var isProcessing = false;\n  var i = 0;\n  var cancelled = new WeakSet();\n  var toKeepAlive = new WeakSet();\n  var renderStep = {\n    cancel: function (process) {\n      var indexOfCallback = processToRunNextFrame.indexOf(process);\n      cancelled.add(process);\n\n      if (indexOfCallback !== -1) {\n        processToRunNextFrame.splice(indexOfCallback, 1);\n      }\n    },\n    process: function (frame) {\n      var _a;\n\n      isProcessing = true;\n      _a = [processToRunNextFrame, processToRun], processToRun = _a[0], processToRunNextFrame = _a[1];\n      processToRunNextFrame.length = 0;\n      numThisFrame = processToRun.length;\n\n      if (numThisFrame) {\n        var process_1;\n\n        for (i = 0; i < numThisFrame; i++) {\n          process_1 = processToRun[i];\n          process_1(frame);\n\n          if (toKeepAlive.has(process_1) === true && !cancelled.has(process_1)) {\n            renderStep.schedule(process_1);\n            setRunNextFrame(true);\n          }\n        }\n      }\n\n      isProcessing = false;\n    },\n    schedule: function (process, keepAlive, immediate) {\n      if (keepAlive === void 0) {\n        keepAlive = false;\n      }\n\n      if (immediate === void 0) {\n        immediate = false;\n      }\n\n      invariant(typeof process === \"function\", \"Argument must be a function\");\n      var addToCurrentBuffer = immediate && isProcessing;\n      var buffer = addToCurrentBuffer ? processToRun : processToRunNextFrame;\n      cancelled.delete(process);\n      if (keepAlive) toKeepAlive.add(process);\n\n      if (buffer.indexOf(process) === -1) {\n        buffer.push(process);\n        if (addToCurrentBuffer) numThisFrame = processToRun.length;\n      }\n    }\n  };\n  return renderStep;\n};\n\nvar maxElapsed = 40;\nvar defaultElapsed = 1 / 60 * 1000;\nvar useDefaultElapsed = true;\nvar willRunNextFrame = false;\nvar isProcessing = false;\nvar frame = {\n  delta: 0,\n  timestamp: 0\n};\nvar stepsOrder = [\"read\", \"update\", \"preRender\", \"render\", \"postRender\"];\n\nvar setWillRunNextFrame = function (willRun) {\n  return willRunNextFrame = willRun;\n};\n\nvar steps = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n  acc[key] = createStep(setWillRunNextFrame);\n  return acc;\n}, {});\nvar sync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n  var step = steps[key];\n\n  acc[key] = function (process, keepAlive, immediate) {\n    if (keepAlive === void 0) {\n      keepAlive = false;\n    }\n\n    if (immediate === void 0) {\n      immediate = false;\n    }\n\n    if (!willRunNextFrame) startLoop();\n    step.schedule(process, keepAlive, immediate);\n    return process;\n  };\n\n  return acc;\n}, {});\nvar cancelSync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n  acc[key] = steps[key].cancel;\n  return acc;\n}, {});\n\nvar processStep = function (stepId) {\n  return steps[stepId].process(frame);\n};\n\nvar processFrame = function (timestamp) {\n  willRunNextFrame = false;\n  frame.delta = useDefaultElapsed ? defaultElapsed : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n  if (!useDefaultElapsed) defaultElapsed = frame.delta;\n  frame.timestamp = timestamp;\n  isProcessing = true;\n  stepsOrder.forEach(processStep);\n  isProcessing = false;\n\n  if (willRunNextFrame) {\n    useDefaultElapsed = false;\n    onNextFrame(processFrame);\n  }\n};\n\nvar startLoop = function () {\n  willRunNextFrame = true;\n  useDefaultElapsed = true;\n  if (!isProcessing) onNextFrame(processFrame);\n};\n\nvar getFrameData = function () {\n  return frame;\n};\n\nexport default sync;\nexport { cancelSync, getFrameData };","map":{"version":3,"names":["invariant","prevTime","onNextFrame","window","requestAnimationFrame","undefined","callback","timestamp","Date","now","timeToCall","Math","max","setTimeout","createStep","setRunNextFrame","processToRun","processToRunNextFrame","numThisFrame","isProcessing","i","cancelled","WeakSet","toKeepAlive","renderStep","cancel","process","indexOfCallback","indexOf","add","splice","frame","_a","length","process_1","has","schedule","keepAlive","immediate","addToCurrentBuffer","buffer","delete","push","maxElapsed","defaultElapsed","useDefaultElapsed","willRunNextFrame","delta","stepsOrder","setWillRunNextFrame","willRun","steps","reduce","acc","key","sync","step","startLoop","cancelSync","processStep","stepId","processFrame","min","forEach","getFrameData"],"sources":["E:/Work/PFE/Project folder/DocHelp-WA/node_modules/framesync/dist/framesync.es.js"],"sourcesContent":["import { invariant } from 'hey-listen';\n\nvar prevTime = 0;\nvar onNextFrame = typeof window !== 'undefined' && window.requestAnimationFrame !== undefined ? function (callback) {\n    return window.requestAnimationFrame(callback);\n} : function (callback) {\n    var timestamp = Date.now();\n    var timeToCall = Math.max(0, 16.7 - (timestamp - prevTime));\n    prevTime = timestamp + timeToCall;\n    setTimeout(function () {\n        return callback(prevTime);\n    }, timeToCall);\n};\n\nvar createStep = function (setRunNextFrame) {\n    var processToRun = [];\n    var processToRunNextFrame = [];\n    var numThisFrame = 0;\n    var isProcessing = false;\n    var i = 0;\n    var cancelled = new WeakSet();\n    var toKeepAlive = new WeakSet();\n    var renderStep = {\n        cancel: function (process) {\n            var indexOfCallback = processToRunNextFrame.indexOf(process);\n            cancelled.add(process);\n            if (indexOfCallback !== -1) {\n                processToRunNextFrame.splice(indexOfCallback, 1);\n            }\n        },\n        process: function (frame) {\n            var _a;\n            isProcessing = true;\n            _a = [processToRunNextFrame, processToRun], processToRun = _a[0], processToRunNextFrame = _a[1];\n            processToRunNextFrame.length = 0;\n            numThisFrame = processToRun.length;\n            if (numThisFrame) {\n                var process_1;\n                for (i = 0; i < numThisFrame; i++) {\n                    process_1 = processToRun[i];\n                    process_1(frame);\n                    if (toKeepAlive.has(process_1) === true && !cancelled.has(process_1)) {\n                        renderStep.schedule(process_1);\n                        setRunNextFrame(true);\n                    }\n                }\n            }\n            isProcessing = false;\n        },\n        schedule: function (process, keepAlive, immediate) {\n            if (keepAlive === void 0) {\n                keepAlive = false;\n            }\n            if (immediate === void 0) {\n                immediate = false;\n            }\n            invariant(typeof process === \"function\", \"Argument must be a function\");\n            var addToCurrentBuffer = immediate && isProcessing;\n            var buffer = addToCurrentBuffer ? processToRun : processToRunNextFrame;\n            cancelled.delete(process);\n            if (keepAlive) toKeepAlive.add(process);\n            if (buffer.indexOf(process) === -1) {\n                buffer.push(process);\n                if (addToCurrentBuffer) numThisFrame = processToRun.length;\n            }\n        }\n    };\n    return renderStep;\n};\n\nvar maxElapsed = 40;\nvar defaultElapsed = 1 / 60 * 1000;\nvar useDefaultElapsed = true;\nvar willRunNextFrame = false;\nvar isProcessing = false;\nvar frame = {\n    delta: 0,\n    timestamp: 0\n};\nvar stepsOrder = [\"read\", \"update\", \"preRender\", \"render\", \"postRender\"];\nvar setWillRunNextFrame = function (willRun) {\n    return willRunNextFrame = willRun;\n};\nvar steps = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    acc[key] = createStep(setWillRunNextFrame);\n    return acc;\n}, {});\nvar sync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    var step = steps[key];\n    acc[key] = function (process, keepAlive, immediate) {\n        if (keepAlive === void 0) {\n            keepAlive = false;\n        }\n        if (immediate === void 0) {\n            immediate = false;\n        }\n        if (!willRunNextFrame) startLoop();\n        step.schedule(process, keepAlive, immediate);\n        return process;\n    };\n    return acc;\n}, {});\nvar cancelSync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    acc[key] = steps[key].cancel;\n    return acc;\n}, {});\nvar processStep = function (stepId) {\n    return steps[stepId].process(frame);\n};\nvar processFrame = function (timestamp) {\n    willRunNextFrame = false;\n    frame.delta = useDefaultElapsed ? defaultElapsed : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n    if (!useDefaultElapsed) defaultElapsed = frame.delta;\n    frame.timestamp = timestamp;\n    isProcessing = true;\n    stepsOrder.forEach(processStep);\n    isProcessing = false;\n    if (willRunNextFrame) {\n        useDefaultElapsed = false;\n        onNextFrame(processFrame);\n    }\n};\nvar startLoop = function () {\n    willRunNextFrame = true;\n    useDefaultElapsed = true;\n    if (!isProcessing) onNextFrame(processFrame);\n};\nvar getFrameData = function () {\n    return frame;\n};\n\nexport default sync;\nexport { cancelSync, getFrameData };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}