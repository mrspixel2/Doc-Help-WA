{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport * as React from 'react';\nimport warning from \"rc-util/es/warning\";\nimport FieldContext from './FieldContext';\nimport Field from './Field';\nimport { move as _move, getNamePath } from './utils/valueUtil';\n\nvar List = function List(_ref) {\n  var name = _ref.name,\n      children = _ref.children;\n  var context = React.useContext(FieldContext);\n  var keyRef = React.useRef({\n    keys: [],\n    id: 0\n  });\n  var keyManager = keyRef.current; // User should not pass `children` as other type.\n\n  if (typeof children !== 'function') {\n    warning(false, 'Form.List only accepts function as children.');\n    return null;\n  }\n\n  var parentPrefixName = getNamePath(context.prefixName) || [];\n  var prefixName = [].concat(_toConsumableArray(parentPrefixName), _toConsumableArray(getNamePath(name)));\n\n  var shouldUpdate = function shouldUpdate(prevValue, nextValue, _ref2) {\n    var source = _ref2.source;\n\n    if (source === 'internal') {\n      return false;\n    }\n\n    return prevValue !== nextValue;\n  };\n\n  return React.createElement(FieldContext.Provider, {\n    value: _objectSpread({}, context, {\n      prefixName: prefixName\n    })\n  }, React.createElement(Field, {\n    name: [],\n    shouldUpdate: shouldUpdate\n  }, function (_ref3) {\n    var _ref3$value = _ref3.value,\n        value = _ref3$value === void 0 ? [] : _ref3$value,\n        onChange = _ref3.onChange;\n    var getFieldValue = context.getFieldValue;\n\n    var getNewValue = function getNewValue() {\n      var values = getFieldValue(prefixName || []);\n      return values || [];\n    };\n    /**\n     * Always get latest value in case user update fields by `form` api.\n     */\n\n\n    var operations = {\n      add: function add(defaultValue) {\n        // Mapping keys\n        keyManager.keys = [].concat(_toConsumableArray(keyManager.keys), [keyManager.id]);\n        keyManager.id += 1;\n        var newValue = getNewValue();\n        onChange([].concat(_toConsumableArray(newValue), [defaultValue]));\n      },\n      remove: function remove(index) {\n        var newValue = getNewValue(); // Do not handle out of range\n\n        if (index < 0 || index >= newValue.length) {\n          return;\n        } // Update key mapping\n\n\n        var newKeys = keyManager.keys.map(function (key, id) {\n          if (id < index) {\n            return key;\n          }\n\n          return keyManager.keys[id + 1];\n        });\n        keyManager.keys = newKeys.slice(0, -1); // Trigger store change\n\n        onChange(newValue.filter(function (_, id) {\n          return id !== index;\n        }));\n      },\n      move: function move(from, to) {\n        if (from === to) {\n          return;\n        }\n\n        var newValue = getNewValue(); // Do not handle out of range\n\n        if (from < 0 || from >= newValue.length || to < 0 || to >= newValue.length) {\n          return;\n        }\n\n        keyManager.keys = _move(keyManager.keys, from, to); // Trigger store change\n\n        onChange(_move(newValue, from, to));\n      }\n    };\n    return children(value.map(function (__, index) {\n      var key = keyManager.keys[index];\n\n      if (key === undefined) {\n        keyManager.keys[index] = keyManager.id;\n        key = keyManager.keys[index];\n        keyManager.id += 1;\n      }\n\n      return {\n        name: index,\n        key: key,\n        isListField: true\n      };\n    }), operations);\n  }));\n};\n\nexport default List;","map":{"version":3,"names":["_defineProperty","_toConsumableArray","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","React","warning","FieldContext","Field","move","_move","getNamePath","List","_ref","name","children","context","useContext","keyRef","useRef","id","keyManager","current","parentPrefixName","prefixName","concat","shouldUpdate","prevValue","nextValue","_ref2","createElement","Provider","value","_ref3","_ref3$value","onChange","getFieldValue","getNewValue","values","operations","add","defaultValue","newValue","remove","index","newKeys","map","slice","_","from","to","__","undefined","isListField"],"sources":["E:/Work/PFE/Project folder/DocHelp-WA/node_modules/rc-field-form/es/List.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as React from 'react';\nimport warning from \"rc-util/es/warning\";\nimport FieldContext from './FieldContext';\nimport Field from './Field';\nimport { move as _move, getNamePath } from './utils/valueUtil';\n\nvar List = function List(_ref) {\n  var name = _ref.name,\n      children = _ref.children;\n  var context = React.useContext(FieldContext);\n  var keyRef = React.useRef({\n    keys: [],\n    id: 0\n  });\n  var keyManager = keyRef.current; // User should not pass `children` as other type.\n\n  if (typeof children !== 'function') {\n    warning(false, 'Form.List only accepts function as children.');\n    return null;\n  }\n\n  var parentPrefixName = getNamePath(context.prefixName) || [];\n  var prefixName = [].concat(_toConsumableArray(parentPrefixName), _toConsumableArray(getNamePath(name)));\n\n  var shouldUpdate = function shouldUpdate(prevValue, nextValue, _ref2) {\n    var source = _ref2.source;\n\n    if (source === 'internal') {\n      return false;\n    }\n\n    return prevValue !== nextValue;\n  };\n\n  return React.createElement(FieldContext.Provider, {\n    value: _objectSpread({}, context, {\n      prefixName: prefixName\n    })\n  }, React.createElement(Field, {\n    name: [],\n    shouldUpdate: shouldUpdate\n  }, function (_ref3) {\n    var _ref3$value = _ref3.value,\n        value = _ref3$value === void 0 ? [] : _ref3$value,\n        onChange = _ref3.onChange;\n    var getFieldValue = context.getFieldValue;\n\n    var getNewValue = function getNewValue() {\n      var values = getFieldValue(prefixName || []);\n      return values || [];\n    };\n    /**\n     * Always get latest value in case user update fields by `form` api.\n     */\n\n\n    var operations = {\n      add: function add(defaultValue) {\n        // Mapping keys\n        keyManager.keys = [].concat(_toConsumableArray(keyManager.keys), [keyManager.id]);\n        keyManager.id += 1;\n        var newValue = getNewValue();\n        onChange([].concat(_toConsumableArray(newValue), [defaultValue]));\n      },\n      remove: function remove(index) {\n        var newValue = getNewValue(); // Do not handle out of range\n\n        if (index < 0 || index >= newValue.length) {\n          return;\n        } // Update key mapping\n\n\n        var newKeys = keyManager.keys.map(function (key, id) {\n          if (id < index) {\n            return key;\n          }\n\n          return keyManager.keys[id + 1];\n        });\n        keyManager.keys = newKeys.slice(0, -1); // Trigger store change\n\n        onChange(newValue.filter(function (_, id) {\n          return id !== index;\n        }));\n      },\n      move: function move(from, to) {\n        if (from === to) {\n          return;\n        }\n\n        var newValue = getNewValue(); // Do not handle out of range\n\n        if (from < 0 || from >= newValue.length || to < 0 || to >= newValue.length) {\n          return;\n        }\n\n        keyManager.keys = _move(keyManager.keys, from, to); // Trigger store change\n\n        onChange(_move(newValue, from, to));\n      }\n    };\n    return children(value.map(function (__, index) {\n      var key = keyManager.keys[index];\n\n      if (key === undefined) {\n        keyManager.keys[index] = keyManager.id;\n        key = keyManager.keys[index];\n        keyManager.id += 1;\n      }\n\n      return {\n        name: index,\n        key: key,\n        isListField: true\n      };\n    }), operations);\n  }));\n};\n\nexport default List;"],"mappings":"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"},"metadata":{},"sourceType":"module"}